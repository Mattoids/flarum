{"version":3,"file":"forum.js","mappings":"MACA,IAAIA,EAAsB,CCA1BA,EAAyBC,IACxB,IAAIC,EAASD,GAAUA,EAAOE,WAC7B,IAAOF,EAAiB,QACxB,IAAM,EAEP,OADAD,EAAoBI,EAAEF,EAAQ,CAAEG,EAAGH,IAC5BA,CAAM,ECLdF,EAAwB,CAACM,EAASC,KACjC,IAAI,IAAIC,KAAOD,EACXP,EAAoBS,EAAEF,EAAYC,KAASR,EAAoBS,EAAEH,EAASE,IAC5EE,OAAOC,eAAeL,EAASE,EAAK,CAAEI,YAAY,EAAMC,IAAKN,EAAWC,IAE1E,ECNDR,EAAwB,CAACc,EAAKC,IAAUL,OAAOM,UAAUC,eAAeC,KAAKJ,EAAKC,GCClFf,EAAyBM,IACH,oBAAXa,QAA0BA,OAAOC,aAC1CV,OAAOC,eAAeL,EAASa,OAAOC,YAAa,CAAEC,MAAO,WAE7DX,OAAOC,eAAeL,EAAS,aAAc,CAAEe,OAAO,GAAO,G,+BCL9D,MAAM,EAA+BC,OAAOC,KAAKC,OAAY,I,aCA7D,MAAM,EAA+BF,OAAOC,KAAKC,OAAO,+B,aCAnBF,OAAOC,KAA5C,MCAM,EAA+BD,OAAOC,KAAKC,OAAe,OCA1D,EAA+BF,OAAOC,KAAKC,OAAO,e,aCAxD,MAAM,EAA+BF,OAAOC,KAAKC,OAAc,M,aCA/D,MAAM,EAA+BF,OAAOC,KAAKC,OAAO,sB,aCAxD,MAAM,EAA+BF,OAAOC,KAAKC,OAAO,sB,aCAxD,MAAM,EAA+BF,OAAOC,KAAKC,OAAO,qB,aCAzC,SAASC,EAAgBhB,EAAGiB,GAKzC,OAJAD,EAAkBf,OAAOiB,eAAiBjB,OAAOiB,eAAeC,OAAS,SAAyBnB,EAAGiB,GAEnG,OADAjB,EAAEoB,UAAYH,EACPjB,CACT,EACOgB,EAAgBhB,EAAGiB,EAC5B,CCLe,SAASI,EAAeC,EAAUC,GAC/CD,EAASf,UAAYN,OAAOuB,OAAOD,EAAWhB,WAC9Ce,EAASf,UAAUkB,YAAcH,EACjCJ,EAAeI,EAAUC,EAC3B,CCLA,MAAM,EAA+BV,OAAOC,KAAKC,OAAO,oB,aCAxD,MAAM,EAA+BF,OAAOC,KAAKC,OAAO,oB,aCAxD,MAAM,EAA+BF,OAAOC,KAAKC,OAAO,gB,aCKnCW,EAAY,SAAAC,GAAA,SAAAD,IAAA,OAAAC,EAAAC,MAAA,KAAAC,YAAA,KAAAR,EAAAK,EAAAC,GAAA,IAAAG,EAAAJ,EAAAnB,UA6F9B,OA7F8BuB,EAC/BC,OAAA,SAAOC,GACLL,EAAApB,UAAMwB,OAAMtB,KAAC,KAAAuB,GAEbC,KAAKC,cAAgBC,IAAO,IAC5BF,KAAKG,eAAiBD,IAAO,IAC7BF,KAAKI,QAAUF,IAAO,EACxB,EAACL,EAEDQ,UAAA,WACE,MAAO,4BACT,EAACR,EAEDS,MAAA,WACE,OAAOC,IAAIC,WAAWC,MAAM,4DAA6D,CAAEC,SAAUA,IAASV,KAAKW,MAAMC,OAC3H,EAACf,EAEDgB,QAAA,WACE,OACEC,EAAA,OAAKT,UAAU,cACbS,EAAA,OAAKT,UAAU,uBACbS,EAAA,OAAKT,UAAU,cACbS,EAAA,WACEA,EAAA,aACGP,IAAIC,WAAWC,MAAM,qEACtBK,EAAA,SAAOC,KAAK,SAASV,UAAU,cAAcW,KAAMhB,KAAKI,QAASa,IAAI,IAAIC,IAAI,SAInFJ,EAAA,OAAKT,UAAU,cACbS,EAAA,WACEA,EAAA,aACGP,IAAIC,WAAWC,MAAM,2EAA4E,CAChGC,SAAUA,IAASV,KAAKW,MAAMC,QAEhCE,EAAA,YAAUT,UAAU,cAAcW,KAAMhB,KAAKC,cAAekB,UAAU,EAAMC,KAAK,SAIvFN,EAAA,OAAKT,UAAU,cACbS,EAAA,WACEA,EAAA,aACGP,IAAIC,WAAWC,MAAM,4EAA6E,CACjGC,SAAUA,IAASV,KAAKW,MAAMC,QAEhCE,EAAA,YAAUT,UAAU,cAAcW,KAAMhB,KAAKG,eAAgBiB,KAAK,SAIxEN,EAAA,OAAKT,UAAU,cACbS,EAACO,IAAM,CAAChB,UAAU,uCAAuCU,KAAK,SAASO,QAAStB,KAAKsB,SAClFf,IAAIC,WAAWC,MAAM,sEAMlC,EAACZ,EAED0B,SAAA,SAASC,GACPA,EAAEC,iBAEFlB,IAAImB,OAAOC,QAAQ3B,KAAK4B,cAExB5B,KAAKsB,SAAU,EAEVtB,KAAKI,WACRJ,KAAKI,QAAQ,GAGf,IAAMyB,EAAa,CACjBC,OAAQ9B,KAAKW,MAAMC,KAAKmB,KACxB3B,QAASJ,KAAKI,UACd4B,eAAgBhC,KAAKC,gBACrBgC,gBAAiBjC,KAAKG,kBAGpBH,KAAKW,MAAMuB,OACbL,EAAWK,KAAOlC,KAAKW,MAAMuB,MAG/B3B,IAAI4B,MACDC,aAAa,YACbC,KAAKR,GACLS,KAAKtC,KAAKuC,KAAKrD,KAAKc,OACpBsC,KACEtC,KAAK4B,aAAerB,IAAImB,OAAOc,KAC9B,CAAEzB,KAAM,WACRR,IAAIC,WAAWC,MAAM,4EAGxB6B,KAAKtC,KAAKW,MAAM8B,UAAS,OACnB,WAAO,GAClB,EAAChD,CAAA,CA7F8B,CAASiD,KCL1C,MAAM,EAA+B9D,OAAOC,KAAKC,OAAO,uB,aCAxD,MAAM,EAA+BF,OAAOC,KAAKC,OAAO,yB,aCAzC,SAAS6D,IAYtB,OAXAA,EAAW3E,OAAO4E,OAAS5E,OAAO4E,OAAO1D,OAAS,SAAU2D,GAC1D,IAAK,IAAIC,EAAI,EAAGA,EAAIlD,UAAUmD,OAAQD,IAAK,CACzC,IAAIE,EAASpD,UAAUkD,GACvB,IAAK,IAAIhF,KAAOkF,EACVhF,OAAOM,UAAUC,eAAeC,KAAKwE,EAAQlF,KAC/C+E,EAAO/E,GAAOkF,EAAOlF,GAG3B,CACA,OAAO+E,CACT,EACOF,EAAShD,MAAMK,KAAMJ,UAC9B,CCbA,MAAM,EAA+BhB,OAAOC,KAAKC,OAAkB,U,aCAnE,MAAM,EAA+BF,OAAOC,KAAKC,OAAO,+B,aCAxD,MAAM,EAA+BF,OAAOC,KAAKC,OAAO,uB,aCAxD,MAAM,EAA+BF,OAAOC,KAAKC,OAAO,mB,aCAxD,MAAM,EAA+BF,OAAOC,KAAKC,OAAO,kB,aCAxD,MAAM,EAA+BF,OAAOC,KAAKC,OAAO,qB,aCAxD,MAAM,EAA+BF,OAAOC,KAAKC,OAAO,mB,aCAxD,MAAM,EAA+BF,OAAOC,KAAKC,OAAO,0B,aCGnCmE,EAAW,SAAAC,GAAA,SAAAD,IAAA,OAAAC,EAAAvD,MAAA,KAAAC,YAAA,KAAAR,EAAA6D,EAAAC,GAAA,IAAArD,EAAAoD,EAAA3E,UAe7B,OAf6BuB,EAC9BsD,KAAA,WACE,OACErC,EAAA,OAAKT,UAAU,eACbS,EAAA,MAAIsC,MAAM,6CACRtC,EAAA,UAAKuC,IAAAA,UAAsB,CAAEnB,KAAMlC,KAAKW,MAAMuB,SAItD,EAACrC,EAEDyD,SAAA,SAASvD,GACPmD,EAAA5E,UAAMgF,SAAQ9E,KAAC,KAAAuB,GAEfC,KAAKuD,EAAE,wBAAwBf,OAAOgB,IAAI,WAAY,WACxD,EAACP,CAAA,CAf6B,CAASQ,KCHzC,MAAM,EAA+B7E,OAAOC,KAAKC,OAAO,wB,aCAxD,MAAM,EAA+BF,OAAOC,KAAKC,OAAO,kB,aCQxD,UAUE4E,SAAQ,SAACC,EAASC,GAAS,IAAAC,EAAA,KACnBC,EAAQ,IAAIC,KAUlB,MARA,CAAC,OAAQ,aAAc,eAAeC,SAAQ,SAACC,GAC7C,IAAMP,EAAWG,EAAKI,EAAU,YAAYN,EAASC,GAASM,UAC1DR,EAASX,SACXW,EAASM,SAAQ,SAACG,GAAI,OAAKL,EAAMM,IAAID,EAAKE,SAAUF,EAAK,IACzDL,EAAMM,IAAIH,EAAU,YAAaK,IAAAA,aAErC,IAEOR,CACT,EAWAS,aAAY,SAACZ,EAASC,GACpB,OAAO,IAAIG,IACb,EAWAS,mBAAkB,SAACb,EAASC,GAC1B,OAAO,IAAIG,IACb,EAWAU,oBAAmB,SAACd,EAASC,GAC3B,IAAME,EAAQ,IAAIC,KA0BlB,OAzBKJ,EAAQe,YAAcnE,IAAIoE,QAAQ/D,KAAKgE,qBAC1Cd,EAAMM,IACJ,OACAtD,EAACO,IAAM,CAACwD,KAAK,mBAAmBC,QAAS9E,KAAK+E,WAAW7F,KAAKyE,IAC3DpD,IAAIC,WAAWC,MAAM,wEAIxBkD,EAAQe,YAAcnE,IAAIoE,QAAQ/D,KAAKgE,qBACzCd,EAAMM,IACJ,UACAtD,EAACO,IAAM,CAACwD,KAAK,eAAeC,QAAS9E,KAAKgF,cAAc9F,KAAKyE,IAC1DpD,IAAIC,WAAWC,MAAM,yEAIxBkD,EAAQe,YAAcnE,IAAIoE,QAAQ/D,KAAKqE,qBACzCnB,EAAMM,IACJ,SACAtD,EAACO,IAAM,CAACwD,KAAK,eAAeC,QAAS9E,KAAKkF,aAAahG,KAAKyE,IACzDpD,IAAIC,WAAWC,MAAM,gFAKrBqD,CACT,EAOAiB,WAAU,WAGR,OAFA/E,KAAKmF,eAAe,CAAEC,SAAU,IAAIC,KAAQC,WAAY/E,IAAIoE,QAAQ/D,OAE7DZ,KAAKqC,KAAK,CAAEqC,UAAU,IAAQpC,MAAK,kBAAMxB,EAAEyE,QAAQ,GAC5D,EAOAP,cAAa,WAGX,OAFAhF,KAAKmF,eAAe,CAAEC,SAAU,KAAME,WAAY,OAE3CtF,KAAKqC,KAAK,CAAEqC,UAAU,IAASpC,MAAK,kBAAMxB,EAAEyE,QAAQ,GAC7D,EAOAL,aAAY,SAACtB,GAGX,OAFIA,IAASA,EAAQtC,SAAU,GAExBtB,KAAI,SACRsC,MAAK,WAAO,IAAE,OACR,WAAO,IACbA,MAAK,WACAsB,IAASA,EAAQtC,SAAU,GAC/BkE,SAASC,QACX,GACJ,GC9H8C,IAE3BC,GAAe,SAAAxC,GAAA,SAAAwC,IAAA,OAAAxC,EAAAvD,MAAA,KAAAC,YAAA,KAAAR,EAAAsG,EAAAxC,GAAA,IAAArD,EAAA6F,EAAApH,UAkFjC,OAlFiCuB,EAClCsD,KAAA,WACE,IAAQQ,EAAY3D,KAAKW,MAAjBgD,QACFgC,EAAchC,EAAQgC,cACtBjC,EAAWkC,GAAgBlC,SAASC,EAAS3D,MAAMkE,UAEzD,OACEpD,EAAA,MAASd,KAAK6F,eACXnC,EAASX,OACN+C,IAAAA,UACE,CACEjB,KAAM,oBACNxE,UAAW,2BACX0F,gBAAiB,mFAEnBrC,GAEF,GACJ5C,EAAA,OAAKT,UAAU,wBACbS,EAAA,MAAIT,UAAU,yBACZS,EAACkF,IAAI,CAACC,KAAMN,EAAcpF,IAAI2F,MAAMtF,KAAK+E,GAAe,IAAKtF,UAAU,0BACpE8F,IAAOR,GAAa,IAAEjF,IAASiF,KAGpC7E,EAAA,QAAMsC,MAAM,2BACTO,EAAQe,WACLnE,IAAIC,WAAWC,MAAM,iFAAkF,CACrG2F,KAAMC,IAAU1C,EAAQ2C,aACxBlG,QAASuD,EAAQvD,WAAa,IAEhCG,IAAIC,WAAWC,MAAM,0EAA2E,CAC9F2F,KAAMC,IAAU1C,EAAQ2C,aACxBlG,QAASuD,EAAQvD,WAAa,KAGtCU,EAAA,WACAA,EAAA,MAAIT,UAAU,wBACXsD,EAAQzB,OACPpB,EAAA,MAAIT,UAAU,gBACZS,EAAA,MAAIT,UAAU,4BACXE,IAAIC,WAAWC,MAAM,sEAEvBwC,EAAYsD,UAAU,CAAErE,KAAMyB,EAAQzB,UAGzC,GAEFpB,EAAA,MAAIT,UAAU,gBACZS,EAAA,MAAIT,UAAU,4BACXE,IAAIC,WAAWC,MAAM,yEAExBK,EAAA,KAAGsC,MAAM,2BAA2BtC,EAAE0F,MAAM7C,EAAQ3B,oBAErDzB,IAAIoE,QAAQ/D,KAAKgE,qBAAuBjB,EAAQ1B,kBAC/CnB,EAAA,MAAIT,UAAU,gBACZS,EAAA,MAAIT,UAAU,4BACXE,IAAIC,WAAWC,MAAM,0EAExBK,EAAA,KAAGsC,MAAM,2BAA2BtC,EAAE0F,MAAM7C,EAAQ1B,qBAGtD,KAMZ,EAACpC,EAEDgG,aAAA,WACE,IAAQlC,EAAY3D,KAAKW,MAAjBgD,QACFhD,EAAQ,CAAC,EAUf,OARAA,EAAMN,WACHM,EAAMN,WAAa,IACpB,IACAoG,IAAU,CACRf,iBAAiB,EACjB,0BAA2B/B,EAAQe,aAGhC/D,CACT,EAAC+E,CAAA,CAlFiC,CAASjC,KCV7C,MAAM,GAA+B7E,OAAOC,KAAKC,OAAO,qB,eCSnC4H,GAAW,SAAAxD,GAAA,SAAAwD,IAAA,OAAAxD,EAAAvD,MAAA,KAAAC,YAAA,KAAAR,EAAAsH,EAAAxD,GAAA,IAAArD,EAAA6G,EAAApI,UAyF7B,OAzF6BuB,EAC9BC,OAAA,SAAOC,GACLmD,EAAA5E,UAAMwB,OAAMtB,KAAC,KAAAuB,GACbC,KAAKsB,SAAU,EACftB,KAAK2G,SAAW,GAChB3G,KAAKY,KAAOZ,KAAKW,MAAMiG,OAAOhG,KAC9BZ,KAAK6G,SACP,EAAChH,EAEDsD,KAAA,WACE,IAAI7B,EAMJ,OAJItB,KAAKsB,UACPA,EAAUwF,IAAAA,UAA2B,CAAEC,KAAM,WAI7CjG,EAAA,OAAKT,UAAU,eACbS,EAAA,MAAIT,UAAU,wBACXL,KAAKgH,cACFzG,IAAAA,WAAeE,MAAM,4DAA6D,CAAEL,QAASJ,KAAKgH,eAAiB,IACnHzG,IAAAA,WAAeE,MAAM,yEAE3BK,EAAA,OAAKsC,MAAM,oBACTtC,EAAA,MAAIT,UAAU,2BAA2B4G,KAAUjH,KAAKkH,cAAchD,aAExEpD,EAAA,MAAIT,UAAU,wBACXL,KAAK2G,SAASQ,KAAI,SAACxD,GAClB,OACE7C,EAAA,MAAIhD,IAAK6F,EAAQ5B,KAAM,UAAS4B,EAAQ5B,MACrC2D,GAAgBa,UAAU,CAAE5C,QAAAA,IAGnC,KACE3D,KAAKsB,SAAoC,IAAzBtB,KAAK2G,SAAS5D,QAC9BjC,EAAA,aAAQP,IAAAA,WAAeE,MAAM,kEAGjCK,EAAA,OAAKT,UAAU,wBAAwBiB,GAG7C,EAACzB,EAEDqH,YAAA,WACE,IAAMpD,EAAQ,IAAIC,KAWlB,OATIxD,IAAAA,QAAYK,KAAKgE,qBACnBd,EAAMM,IACJ,iBACAtD,EAACO,IAAM,CAAChB,UAAU,yBAAyByE,QAAS9E,KAAKoH,oBAAoBlI,KAAKc,OAC/EO,IAAAA,WAAeE,MAAM,iEAKrBqD,CACT,EAACjE,EAEDmH,YAAA,WACE,OAAOhH,KAAK2G,SACTU,QAAO,SAAC1D,GAAO,OAAMA,EAAQe,UAAU,IACvCyC,KAAI,SAACxD,GAAO,OAAKA,EAAQvD,SAAS,IAClCkH,QAAO,SAAC3J,EAAG4J,GAAC,OAAK5J,EAAI4J,CAAC,GAAE,EAC7B,EAAC1H,EAED2H,aAAA,SAAaC,GAKX,MAJA,GAAGC,KAAK/H,MAAMK,KAAK2G,SAAUc,GAC7BzH,KAAKsB,SAAU,EACfR,EAAEyE,SAEKkC,CACT,EAAC5H,EAEDgH,QAAA,WAAU,IAAAhD,EAAA,KACR,OAAOtD,IAAAA,MACJoH,KAAK,WAAY3H,KAAKY,KAAKmB,MAAK,OAC1B,WAAO,IACbO,MAAK,SAACmF,GACL5D,EAAK8C,SAAW,GAChB9C,EAAK2D,aAAaC,EACpB,GACJ,EAAC5H,EAEDuH,oBAAA,SAAoB5F,GAClBA,EAAEC,iBACFlB,IAAAA,MAAUiC,KAAK/C,EAAYkD,EAAA,CACzBF,SAAUzC,KAAK6G,QAAQ3H,KAAKc,OACzBA,KAAKW,MAAMiG,QAElB,EAACF,CAAA,CAzF6B,CAASjD,KCNpBmE,GAAW,SAAAC,GAAA,SAAAD,IAAA,OAAAC,EAAAlI,MAAA,KAAAC,YAAA,KAAAR,EAAAwI,EAAAC,GAAA,IAAAhI,EAAA+H,EAAAtJ,UAuB7B,OAvB6BuB,EAC9BC,OAAA,SAAOC,GACL8H,EAAAvJ,UAAMwB,OAAMtB,KAAC,KAAAuB,GAEbC,KAAK8H,SAAShH,EAAEoF,MAAM6B,MAAM,YAC9B,EAAClI,EAEDgB,QAAA,WACE,GACEN,IAAIoE,QAAQ/D,OACXL,IAAIoE,QAAQ/D,KAAKoH,mBAAsBhI,KAAKY,KAAKmB,OAASxB,IAAIoE,QAAQ/D,KAAKmB,MAAQ/B,KAAKY,KAAKqH,sBAAwB,GAEtH,OACEnH,EAAA,OAAKT,UAAU,oBACZqG,GAAYH,UAAU,CACrBK,OAAQ,CACNhG,KAAMZ,KAAKY,KACXsH,KAAM,YAMlB,EAACN,CAAA,CAvB6B,CAASO,KCE1B,SAAS,KACtB5H,IAAI6H,OAAO,iBAAmB,CAC5BC,KAAM,wBACN9B,UAAWqB,KAGbU,EAAAA,EAAAA,QAAOH,IAAAA,UAAoB,YAAY,SAAUrE,GAE7CvD,IAAIoE,QAAQ/D,OACXL,IAAIoE,QAAQ/D,KAAKoH,mBAAsBhI,KAAKY,KAAKmB,OAASxB,IAAIoE,QAAQ/D,KAAKmB,MAAQ/B,KAAKY,KAAKqH,sBAAwB,IAEtHnE,EAAMM,IACJ,WACAmE,IAAAA,UACE,CACEtC,KAAM1F,IAAI2F,MAAM,gBAAiB,CAC/BxF,SAAUV,KAAKY,KAAKF,aAEtBmE,KAAM,6BAER,CACEtE,IAAIC,WAAWC,MAAM,qDACrBT,KAAKY,KAAKqH,sBAAwB,EAAInH,EAAA,QAAMT,UAAU,gBAAgBL,KAAKY,KAAKqH,uBAAgC,KAGpH,GAGN,GACF,CClCA,MAAM,GAA+BrJ,OAAOC,KAAKC,OAAO,e,eCAxD,MAAM,GAA+BF,OAAOC,KAAKC,OAAO,0B,eCAxD,MAAM,GAA+BF,OAAOC,KAAKC,OAAO,gB,eCInC0J,GAAc,SAAAtF,GAAA,SAAAsF,IAAA,OAAAtF,EAAAvD,MAAA,KAAAC,YAAA,KAAAR,EAAAoJ,EAAAtF,GAAA,IAAArD,EAAA2I,EAAAlK,UAkBhC,OAlBgCuB,EACjCC,OAAA,SAAOC,GACLmD,EAAA5E,UAAMwB,OAAMtB,KAAC,KAAAuB,GAEbC,KAAK2D,QAAU3D,KAAKW,MAAMgD,OAC5B,EAAC9D,EAEDsD,KAAA,WACE,OACErC,EAACkF,IAAI,CACH3F,UAAU,iBACV4F,KAAM1F,IAAI2F,MAAM,gBAAiB,CAC/BxF,SAAUV,KAAK2D,QAAQ8E,aAAa/H,cAGtCI,EAAC4E,GAAe,CAAC/B,QAAS3D,KAAK2D,UAGrC,EAAC6E,CAAA,CAlBgC,CAAS/E,KCCvBiF,GAAW,SAAAxF,GAAA,SAAAwF,IAAA,OAAAxF,EAAAvD,MAAA,KAAAC,YAAA,KAAAR,EAAAsJ,EAAAxF,GAAA,IAAArD,EAAA6I,EAAApK,UAgF7B,OAhF6BuB,EAC9BC,OAAA,SAAOC,GACLmD,EAAA5E,UAAMwB,OAAMtB,KAAC,KAAAuB,GAEbC,KAAK2D,QAAU3D,KAAKW,MAAMgD,OAC5B,EAAC9D,EAEDsD,KAAA,WACE,OACErC,EAAA,OAAKT,UAAU,gBACbS,EAAA,QAAMT,UAAU,wBACbwE,KAAK,6BACL7E,KAAK2D,QAAQvD,UACVG,IAAIC,WAAWC,MAAM,mDAAoD,CACvEL,QAASJ,KAAK2D,QAAQvD,WAAa,EACnCuI,aAAcjI,IAASV,KAAK2D,QAAQgC,iBAEtCpF,IAAIC,WAAWC,MAAM,8DAA+D,CAClFkI,aAAcjI,IAASV,KAAK2D,QAAQgC,kBAKlD,EAAC9F,EAEDyD,SAAA,SAASvD,GAAO,IAAA8D,EAAA,KACdX,EAAA5E,UAAMgF,SAAQ9E,KAAC,KAAAuB,GAEf,IAEI6I,EAFEjF,EAAU3D,KAAK2D,QAIfkF,EAAc,WAClBhF,EAAKN,EAAE,yBACJuF,YAAY,MACZC,IAAI,iBAAiB,WACpBxF,EAAEvD,MAAMuC,MACV,GACJ,EAEMyG,EAAWzF,EAAE,yDACnBvD,KAAKuD,IAAI0F,OAAOD,GAEhBhJ,KAAKuD,IACF2F,WACAC,OACC,WACEC,aAAaR,GACbA,EAAUS,YAAW,YACdL,EAASM,SAAS,OAASN,EAASO,GAAG,cAK5CzI,EAAE0I,OAAOR,EAAS,GAAIlI,EAAA,MAAI,UAAS6C,EAAQ5B,MAAOyG,GAAejC,UAAU,CAAE5C,QAAAA,MAC7EqF,EAASxG,OACT6G,YAAW,kBAAML,EAASS,IAAI,iBAAiBC,SAAS,KAAK,IAC/D,GAAG,IACL,IACA,WACEN,aAAaR,GACbA,EAAUS,WAAWR,EAAa,IACpC,IAMJtF,EAAE,iBACCoE,KAAK,2BACLwB,OACC,WACE5F,EAAE,iBACCoE,KAAK,iBAAmBpE,EAAEvD,MAAM2J,KAAK,UAAY,MACjDD,SAAS,SACd,IACA,WACEnG,EAAE,iBAAiBoE,KAAK,iBAAiBmB,YAAY,SACvD,GAEN,EAACJ,CAAA,CAhF6B,CAASjF,KCDpBmG,GAAe,SAAA1G,GAAA,SAAA0G,IAAA,OAAA1G,EAAAvD,MAAA,KAAAC,YAAA,KAAAR,EAAAwK,EAAA1G,GAAA,IAAArD,EAAA+J,EAAAtL,UAejC,OAfiCuB,EAClCC,OAAA,SAAOC,GACLmD,EAAA5E,UAAMwB,OAAMtB,KAAC,KAAAuB,GAEbC,KAAKkC,KAAOlC,KAAKW,MAAMuB,IACzB,EAACrC,EAEDsD,KAAA,WACE,OACErC,EAAA,OAAKT,UAAU,qBACZL,KAAKW,MAAMuB,KAAKyE,WAAWQ,KAAI,SAACxD,GAC/B,OAAO+E,GAAYnC,UAAU,CAAE5C,QAAAA,GACjC,IAGN,EAACiG,CAAA,CAfiC,CAASnG,KCJ7C,MAAM,GAA+B7E,OAAOC,KAAKC,OAAO,2B,ICGnC+K,GAAmB,SAAAC,GAAA,SAAAD,IAAA,OAAAC,EAAAnK,MAAA,KAAAC,YAAA,KAAAR,EAAAyK,EAAAC,GAAA,IAAAjK,EAAAgK,EAAAvL,UAwBrC,OAxBqCuB,EACtCgF,KAAA,WACE,MAAO,2BACT,EAAChF,EAEDoG,KAAA,WACE,OAAO1F,IAAI2F,MAAM,gBAAiB,CAChCxF,SAAUH,IAAIoE,QAAQ/D,KAAKF,YAE/B,EAACb,EAEDgB,QAAA,WACE,IAAM8C,EAAU3D,KAAKW,MAAMoJ,aAAaC,UAExC,OAAIrG,EAAQvD,UACHG,IAAIC,WAAWC,MAAM,iEAAkE,CAC5FkI,aAAcjI,IAASV,KAAKW,MAAMoJ,aAAaE,YAC/C7J,QAASuD,EAAQvD,WAAa,IAGzBG,IAAIC,WAAWC,MAAM,4EAA6E,CACvGkI,aAAcjI,IAASV,KAAKW,MAAMoJ,aAAaE,aAGrD,EAACJ,CAAA,CAxBqC,C,OAASK,ICHjD,MAAM,GAA+BtL,OAAOC,KAAKC,OAAO,kB,eCGnCqL,GAAQ,SAAAC,GAAA,SAAAD,IAAA,OAAAC,EAAAzK,MAAA,KAAAC,YAAA,YAAAR,EAAA+K,EAAAC,GAAAD,CAAA,EAASE,KACtCrM,OAAO4E,OAAOuH,GAAS7L,UAAW,CAChCyD,GAAIsI,IAAAA,UAAgB,MACpBrI,eAAgBqI,IAAAA,UAAgB,kBAChCpI,gBAAiBoI,IAAAA,UAAgB,mBACjCjK,QAASiK,IAAAA,UAAgB,WAEzB/D,UAAW+D,IAAAA,UAAgB,YAAaA,IAAAA,eACxC3F,SAAU4F,KAAS,YAAY,SAAClF,GAAQ,QAAOA,CAAQ,IACvDA,SAAUiF,IAAAA,UAAgB,WAAYA,IAAAA,eAEtC5B,WAAY4B,IAAAA,OAAa,cACzBE,aAAcF,IAAAA,OAAa,gBAC3B1E,YAAa0E,IAAAA,OAAa,eAE1BnI,KAAMmI,IAAAA,OAAa,UCNrB9J,IAAAA,aAAiB6D,IAAI,wCAAwC,SAAC7D,GAC5DA,EAAI4B,MAAMqI,OAAO7D,SAAW8D,GAC5BC,IAAAA,UAAe1C,gBAAkBqC,IAAAA,UAAgB,mBACjDK,IAAAA,UAAe9F,kBAAoByF,IAAAA,UAAgB,qBACnDK,IAAAA,UAAezF,kBAAoBoF,IAAAA,UAAgB,qBACnDK,IAAAA,UAAezC,oBAAsBoC,IAAAA,UAAgB,wBCRrD/B,EAAAA,EAAAA,QAAOqC,IAAc,sBAAsB,SAAU7G,EAAO5B,GACrD3B,IAAAA,QAAYK,MAASL,IAAAA,QAAYK,KAAKgE,qBAE3Cd,EAAMM,IACJ,UACAtD,EAACO,IAAM,CACLwD,KAAK,4BACLC,QAAS,kBACPvE,IAAAA,MAAUiC,KAAK/C,EAAc,CAC3BgD,SAAU,WACR+C,SAASC,QACX,EACA7E,KAAMsB,EAAKtB,OACXsB,KAAMA,GACN,GAGH3B,IAAAA,WAAeE,MAAM,qEAG5B,KAEA6H,EAAAA,EAAAA,QAAOsC,IAAc,sBAAsB,SAAU9G,EAAOlD,GACrDL,IAAAA,QAAYK,MAASL,IAAAA,QAAYK,KAAKgE,qBAE3Cd,EAAMM,IACJ,UACAtD,EAACO,IAAM,CACLwD,KAAK,4BACLC,QAAS,kBACPvE,IAAAA,MAAUiC,KAAK/C,EAAc,CAC3BgD,SAAU,WACR+C,SAASC,QACX,EACA7E,KAAMA,GACN,GAGHL,IAAAA,WAAeE,MAAM,qEAG5B,ID/BAoK,KEZAC,KAAAA,UAAenE,SAAW0D,IAAAA,QAAc,aAExC/B,EAAAA,EAAAA,QAAOyC,KAAAA,UAAuB,eAAe,SAAUjH,GACrD,IAAM5B,EAAOlC,KAAKW,MAAMuB,KACPA,EAAKyE,YAGtB7C,EAAMM,IAAI,WAERwF,GAAgBrD,UAAU,CACxBrE,KAAMA,IAGZ,IFEA3B,EAAIyK,uBAAuBrH,QAAUkG,IACrCvB,EAAAA,EAAAA,QAAO2C,IAAAA,UAA4B,qBAAqB,SAAUnH,GAChEA,EAAMM,IAAI,UAAW,CACnB8G,KAAM,UACNrG,KAAM,4BACNsG,MAAO5K,EAAIC,WAAWC,MAAM,4EAEhC,GACF,G","sources":["webpack://@askvortsov/flarum-moderator-warnings/webpack/bootstrap","webpack://@askvortsov/flarum-moderator-warnings/webpack/runtime/compat get default export","webpack://@askvortsov/flarum-moderator-warnings/webpack/runtime/define property getters","webpack://@askvortsov/flarum-moderator-warnings/webpack/runtime/hasOwnProperty shorthand","webpack://@askvortsov/flarum-moderator-warnings/webpack/runtime/make namespace object","webpack://@askvortsov/flarum-moderator-warnings/external root \"flarum.core.compat['app']\"","webpack://@askvortsov/flarum-moderator-warnings/external root \"flarum.core.compat['components/NotificationGrid']\"","webpack://@askvortsov/flarum-moderator-warnings/external assign \"flarum.core\"","webpack://@askvortsov/flarum-moderator-warnings/external root \"flarum.core.compat['extend']\"","webpack://@askvortsov/flarum-moderator-warnings/external root \"flarum.core.compat['models/User']\"","webpack://@askvortsov/flarum-moderator-warnings/external root \"flarum.core.compat['Model']\"","webpack://@askvortsov/flarum-moderator-warnings/external root \"flarum.core.compat['utils/PostControls']\"","webpack://@askvortsov/flarum-moderator-warnings/external root \"flarum.core.compat['utils/UserControls']\"","webpack://@askvortsov/flarum-moderator-warnings/external root \"flarum.core.compat['components/Button']\"","webpack://@askvortsov/flarum-moderator-warnings/./node_modules/@babel/runtime/helpers/esm/setPrototypeOf.js","webpack://@askvortsov/flarum-moderator-warnings/./node_modules/@babel/runtime/helpers/esm/inheritsLoose.js","webpack://@askvortsov/flarum-moderator-warnings/external root \"flarum.core.compat['components/Modal']\"","webpack://@askvortsov/flarum-moderator-warnings/external root \"flarum.core.compat['helpers/username']\"","webpack://@askvortsov/flarum-moderator-warnings/external root \"flarum.core.compat['utils/Stream']\"","webpack://@askvortsov/flarum-moderator-warnings/./src/forum/components/WarningModal.js","webpack://@askvortsov/flarum-moderator-warnings/external root \"flarum.core.compat['components/UserPage']\"","webpack://@askvortsov/flarum-moderator-warnings/external root \"flarum.core.compat['components/LinkButton']\"","webpack://@askvortsov/flarum-moderator-warnings/./node_modules/@babel/runtime/helpers/esm/extends.js","webpack://@askvortsov/flarum-moderator-warnings/external root \"flarum.core.compat['Component']\"","webpack://@askvortsov/flarum-moderator-warnings/external root \"flarum.core.compat['components/LoadingIndicator']\"","webpack://@askvortsov/flarum-moderator-warnings/external root \"flarum.core.compat['components/Dropdown']\"","webpack://@askvortsov/flarum-moderator-warnings/external root \"flarum.core.compat['components/Link']\"","webpack://@askvortsov/flarum-moderator-warnings/external root \"flarum.core.compat['helpers/avatar']\"","webpack://@askvortsov/flarum-moderator-warnings/external root \"flarum.core.compat['helpers/humanTime']\"","webpack://@askvortsov/flarum-moderator-warnings/external root \"flarum.core.compat['utils/classList']\"","webpack://@askvortsov/flarum-moderator-warnings/external root \"flarum.core.compat['components/PostPreview']\"","webpack://@askvortsov/flarum-moderator-warnings/./src/forum/components/WarningPost.js","webpack://@askvortsov/flarum-moderator-warnings/external root \"flarum.core.compat['components/Separator']\"","webpack://@askvortsov/flarum-moderator-warnings/external root \"flarum.core.compat['utils/ItemList']\"","webpack://@askvortsov/flarum-moderator-warnings/./src/forum/components/WarningControls.js","webpack://@askvortsov/flarum-moderator-warnings/./src/forum/components/WarningListItem.js","webpack://@askvortsov/flarum-moderator-warnings/external root \"flarum.core.compat['helpers/listItems']\"","webpack://@askvortsov/flarum-moderator-warnings/./src/forum/components/WarningList.js","webpack://@askvortsov/flarum-moderator-warnings/./src/forum/components/WarningPage.js","webpack://@askvortsov/flarum-moderator-warnings/./src/forum/addWarningPage.js","webpack://@askvortsov/flarum-moderator-warnings/external root \"flarum.core.compat['models/Post']\"","webpack://@askvortsov/flarum-moderator-warnings/external root \"flarum.core.compat['components/CommentPost']\"","webpack://@askvortsov/flarum-moderator-warnings/external root \"flarum.core.compat['helpers/icon']\"","webpack://@askvortsov/flarum-moderator-warnings/./src/forum/components/WarningPreview.js","webpack://@askvortsov/flarum-moderator-warnings/./src/forum/components/PostWarning.js","webpack://@askvortsov/flarum-moderator-warnings/./src/forum/components/PostWarningList.js","webpack://@askvortsov/flarum-moderator-warnings/external root \"flarum.core.compat['components/Notification']\"","webpack://@askvortsov/flarum-moderator-warnings/./src/forum/components/WarningNotification.js","webpack://@askvortsov/flarum-moderator-warnings/external root \"flarum.core.compat['utils/computed']\"","webpack://@askvortsov/flarum-moderator-warnings/./src/forum/model/Warning.js","webpack://@askvortsov/flarum-moderator-warnings/./src/forum/index.js","webpack://@askvortsov/flarum-moderator-warnings/./src/forum/addWarningControl.js","webpack://@askvortsov/flarum-moderator-warnings/./src/forum/addWarningsToPosts.js"],"sourcesContent":["// The require scope\nvar __webpack_require__ = {};\n\n","// getDefaultExport function for compatibility with non-harmony modules\n__webpack_require__.n = (module) => {\n\tvar getter = module && module.__esModule ?\n\t\t() => (module['default']) :\n\t\t() => (module);\n\t__webpack_require__.d(getter, { a: getter });\n\treturn getter;\n};","// define getter functions for harmony exports\n__webpack_require__.d = (exports, definition) => {\n\tfor(var key in definition) {\n\t\tif(__webpack_require__.o(definition, key) && !__webpack_require__.o(exports, key)) {\n\t\t\tObject.defineProperty(exports, key, { enumerable: true, get: definition[key] });\n\t\t}\n\t}\n};","__webpack_require__.o = (obj, prop) => (Object.prototype.hasOwnProperty.call(obj, prop))","// define __esModule on exports\n__webpack_require__.r = (exports) => {\n\tif(typeof Symbol !== 'undefined' && Symbol.toStringTag) {\n\t\tObject.defineProperty(exports, Symbol.toStringTag, { value: 'Module' });\n\t}\n\tObject.defineProperty(exports, '__esModule', { value: true });\n};","const __WEBPACK_NAMESPACE_OBJECT__ = flarum.core.compat['app'];","const __WEBPACK_NAMESPACE_OBJECT__ = flarum.core.compat['components/NotificationGrid'];","const __WEBPACK_NAMESPACE_OBJECT__ = flarum.core;","const __WEBPACK_NAMESPACE_OBJECT__ = flarum.core.compat['extend'];","const __WEBPACK_NAMESPACE_OBJECT__ = flarum.core.compat['models/User'];","const __WEBPACK_NAMESPACE_OBJECT__ = flarum.core.compat['Model'];","const __WEBPACK_NAMESPACE_OBJECT__ = flarum.core.compat['utils/PostControls'];","const __WEBPACK_NAMESPACE_OBJECT__ = flarum.core.compat['utils/UserControls'];","const __WEBPACK_NAMESPACE_OBJECT__ = flarum.core.compat['components/Button'];","export default function _setPrototypeOf(o, p) {\n  _setPrototypeOf = Object.setPrototypeOf ? Object.setPrototypeOf.bind() : function _setPrototypeOf(o, p) {\n    o.__proto__ = p;\n    return o;\n  };\n  return _setPrototypeOf(o, p);\n}","import setPrototypeOf from \"./setPrototypeOf.js\";\nexport default function _inheritsLoose(subClass, superClass) {\n  subClass.prototype = Object.create(superClass.prototype);\n  subClass.prototype.constructor = subClass;\n  setPrototypeOf(subClass, superClass);\n}","const __WEBPACK_NAMESPACE_OBJECT__ = flarum.core.compat['components/Modal'];","const __WEBPACK_NAMESPACE_OBJECT__ = flarum.core.compat['helpers/username'];","const __WEBPACK_NAMESPACE_OBJECT__ = flarum.core.compat['utils/Stream'];","import Modal from 'flarum/components/Modal';\nimport Button from 'flarum/components/Button';\nimport username from 'flarum/helpers/username';\nimport Stream from 'flarum/utils/Stream';\n\nexport default class WarningModal extends Modal {\n  oninit(vnode) {\n    super.oninit(vnode);\n\n    this.publicComment = Stream('');\n    this.privateComment = Stream('');\n    this.strikes = Stream(0);\n  }\n\n  className() {\n    return 'WarningsModal Modal--large';\n  }\n\n  title() {\n    return app.translator.trans('askvortsov-moderator-warnings.forum.warning_modal.heading', { username: username(this.attrs.user) });\n  }\n\n  content() {\n    return (\n      <div className=\"Modal-body\">\n        <div className=\"Form Form--centered\">\n          <div className=\"Form-group\">\n            <div>\n              <label>\n                {app.translator.trans('askvortsov-moderator-warnings.forum.warning_modal.strikes_heading')}\n                <input type=\"number\" className=\"FormControl\" bidi={this.strikes} min=\"0\" max=\"5\"></input>\n              </label>\n            </div>\n          </div>\n          <div className=\"Form-group\">\n            <div>\n              <label>\n                {app.translator.trans('askvortsov-moderator-warnings.forum.warning_modal.public_comment_heading', {\n                  username: username(this.attrs.user),\n                })}\n                <textarea className=\"FormControl\" bidi={this.publicComment} required={true} rows=\"6\" />\n              </label>\n            </div>\n          </div>\n          <div className=\"Form-group\">\n            <div>\n              <label>\n                {app.translator.trans('askvortsov-moderator-warnings.forum.warning_modal.private_comment_heading', {\n                  username: username(this.attrs.user),\n                })}\n                <textarea className=\"FormControl\" bidi={this.privateComment} rows=\"6\" />\n              </label>\n            </div>\n          </div>\n          <div className=\"Form-group\">\n            <Button className=\"Button Button--primary Button--block\" type=\"submit\" loading={this.loading}>\n              {app.translator.trans('askvortsov-moderator-warnings.forum.warning_modal.submit_button')}\n            </Button>\n          </div>\n        </div>\n      </div>\n    );\n  }\n\n  onsubmit(e) {\n    e.preventDefault();\n\n    app.alerts.dismiss(this.successAlert);\n\n    this.loading = true;\n\n    if (!this.strikes()) {\n      this.strikes(0);\n    }\n\n    const newWarning = {\n      userId: this.attrs.user.id(),\n      strikes: this.strikes(),\n      public_comment: this.publicComment(),\n      private_comment: this.privateComment(),\n    };\n\n    if (this.attrs.post) {\n      newWarning.post = this.attrs.post;\n    }\n\n    app.store\n      .createRecord('warnings')\n      .save(newWarning)\n      .then(this.hide.bind(this))\n      .then(\n        (this.successAlert = app.alerts.show(\n          { type: 'success' },\n          app.translator.trans('askvortsov-moderator-warnings.forum.warning_modal.confirmation_message')\n        ))\n      )\n      .then(this.attrs.callback)\n      .catch(() => {});\n  }\n}\n","const __WEBPACK_NAMESPACE_OBJECT__ = flarum.core.compat['components/UserPage'];","const __WEBPACK_NAMESPACE_OBJECT__ = flarum.core.compat['components/LinkButton'];","export default function _extends() {\n  _extends = Object.assign ? Object.assign.bind() : function (target) {\n    for (var i = 1; i < arguments.length; i++) {\n      var source = arguments[i];\n      for (var key in source) {\n        if (Object.prototype.hasOwnProperty.call(source, key)) {\n          target[key] = source[key];\n        }\n      }\n    }\n    return target;\n  };\n  return _extends.apply(this, arguments);\n}","const __WEBPACK_NAMESPACE_OBJECT__ = flarum.core.compat['Component'];","const __WEBPACK_NAMESPACE_OBJECT__ = flarum.core.compat['components/LoadingIndicator'];","const __WEBPACK_NAMESPACE_OBJECT__ = flarum.core.compat['components/Dropdown'];","const __WEBPACK_NAMESPACE_OBJECT__ = flarum.core.compat['components/Link'];","const __WEBPACK_NAMESPACE_OBJECT__ = flarum.core.compat['helpers/avatar'];","const __WEBPACK_NAMESPACE_OBJECT__ = flarum.core.compat['helpers/humanTime'];","const __WEBPACK_NAMESPACE_OBJECT__ = flarum.core.compat['utils/classList'];","const __WEBPACK_NAMESPACE_OBJECT__ = flarum.core.compat['components/PostPreview'];","import Component from 'flarum/Component';\nimport PostPreview from 'flarum/components/PostPreview';\n\nexport default class WarningPost extends Component {\n  view() {\n    return (\n      <div className=\"WarningPost\">\n        <ul class=\"Dropdown-menu PostPreview-preview fade in\">\n          <li>{PostPreview.component({ post: this.attrs.post })}</li>\n        </ul>\n      </div>\n    );\n  }\n\n  oncreate(vnode) {\n    super.oncreate(vnode);\n\n    this.$('.PostPreview-preview').show().css('position', 'relative');\n  }\n}\n","const __WEBPACK_NAMESPACE_OBJECT__ = flarum.core.compat['components/Separator'];","const __WEBPACK_NAMESPACE_OBJECT__ = flarum.core.compat['utils/ItemList'];","import Button from 'flarum/components/Button';\nimport Separator from 'flarum/components/Separator';\nimport ItemList from 'flarum/utils/ItemList';\n\n/**\n * The `WarningControls` utility constructs a list of buttons for a warning which\n * perform actions on it.\n */\nexport default {\n  /**\n   * Get a list of controls for a warning.\n   *\n   * @param {Warning} warning\n   * @param {*} context The parent component under which the controls menu will\n   *     be displayed.\n   * @return {ItemList}\n   * @public\n   */\n  controls(warning, context) {\n    const items = new ItemList();\n\n    ['user', 'moderation', 'destructive'].forEach((section) => {\n      const controls = this[section + 'Controls'](warning, context).toArray();\n      if (controls.length) {\n        controls.forEach((item) => items.add(item.itemName, item));\n        items.add(section + 'Separator', Separator.component());\n      }\n    });\n\n    return items;\n  },\n\n  /**\n   * Get controls for a warning pertaining to the current user (e.g. report).\n   *\n   * @param {Warning} warning\n   * @param {*} context The parent component under which the controls menu will\n   *     be displayed.\n   * @return {ItemList}\n   * @protected\n   */\n  userControls(warning, context) {\n    return new ItemList();\n  },\n\n  /**\n   * Get controls for a warning pertaining to moderation (e.g. edit).\n   *\n   * @param {Warning} warning\n   * @param {*} context The parent component under which the controls menu will\n   *     be displayed.\n   * @return {ItemList}\n   * @protected\n   */\n  moderationControls(warning, context) {\n    return new ItemList();\n  },\n\n  /**\n   * Get controls for a warning that are destructive (e.g. delete).\n   *\n   * @param {Warning} warning\n   * @param {*} context The parent component under which the controls menu will\n   *     be displayed.\n   * @return {ItemList}\n   * @protected\n   */\n  destructiveControls(warning, context) {\n    const items = new ItemList();\n    if (!warning.isHidden() && app.session.user.canManageWarnings()) {\n      items.add(\n        'hide',\n        <Button icon=\"far fa-trash-alt\" onclick={this.hideAction.bind(warning)}>\n          {app.translator.trans('askvortsov-moderator-warnings.forum.warning_controls.delete_button')}\n        </Button>\n      );\n    }\n    if (warning.isHidden() && app.session.user.canManageWarnings()) {\n      items.add(\n        'restore',\n        <Button icon=\"fas fa-reply\" onclick={this.restoreAction.bind(warning)}>\n          {app.translator.trans('askvortsov-moderator-warnings.forum.warning_controls.restore_button')}\n        </Button>\n      );\n    }\n    if (warning.isHidden() && app.session.user.canDeleteWarnings()) {\n      items.add(\n        'delete',\n        <Button icon=\"fas fa-times\" onclick={this.deleteAction.bind(warning)}>\n          {app.translator.trans('askvortsov-moderator-warnings.forum.warning_controls.delete_forever_button')}\n        </Button>\n      );\n    }\n\n    return items;\n  },\n\n  /**\n   * Hide a warning.\n   *\n   * @return {Promise}\n   */\n  hideAction() {\n    this.pushAttributes({ hiddenAt: new Date(), hiddenUser: app.session.user });\n\n    return this.save({ isHidden: true }).then(() => m.redraw());\n  },\n\n  /**\n   * Restore a warning.\n   *\n   * @return {Promise}\n   */\n  restoreAction() {\n    this.pushAttributes({ hiddenAt: null, hiddenUser: null });\n\n    return this.save({ isHidden: false }).then(() => m.redraw());\n  },\n\n  /**\n   * Delete a warning.\n   *\n   * @return {Promise}\n   */\n  deleteAction(context) {\n    if (context) context.loading = true;\n\n    return this.delete()\n      .then(() => {})\n      .catch(() => {})\n      .then(() => {\n        if (context) context.loading = false;\n        location.reload();\n      });\n  },\n};\n","import Component from 'flarum/Component';\nimport Dropdown from 'flarum/components/Dropdown';\nimport Link from 'flarum/components/Link';\nimport avatar from 'flarum/helpers/avatar';\nimport username from 'flarum/helpers/username';\nimport humanTime from 'flarum/helpers/humanTime';\nimport classList from 'flarum/utils/classList';\nimport WarningPost from './WarningPost';\nimport WarningControls from './WarningControls';\n\nexport default class WarningListItem extends Component {\n  view() {\n    const { warning } = this.attrs;\n    const addedByUser = warning.addedByUser();\n    const controls = WarningControls.controls(warning, this).toArray();\n\n    return (\n      <div {...this.elementAttrs()}>\n        {controls.length\n          ? Dropdown.component(\n              {\n                icon: 'fas fa-ellipsis-v',\n                className: 'WarningListItem-controls',\n                buttonClassName: 'Button Button--icon Button--flat Slidable-underneath Slidable-underneath--right',\n              },\n              controls\n            )\n          : ''}\n        <div className=\"WarningListItem-main\">\n          <h3 className=\"WarningListItem-title\">\n            <Link href={addedByUser ? app.route.user(addedByUser) : '#'} className=\"WarningListItem-author\">\n              {avatar(addedByUser)} {username(addedByUser)}\n            </Link>\n          </h3>\n          <span class=\"WarningListItem-strikes\">\n            {warning.isHidden()\n              ? app.translator.trans('askvortsov-moderator-warnings.forum.warning_list_item.list_item_heading_hidden', {\n                  time: humanTime(warning.createdAt()),\n                  strikes: warning.strikes() || 0,\n                })\n              : app.translator.trans('askvortsov-moderator-warnings.forum.warning_list_item.list_item_heading', {\n                  time: humanTime(warning.createdAt()),\n                  strikes: warning.strikes() || 0,\n                })}\n          </span>\n          <hr />\n          <ul className=\"WarningListItem-info\">\n            {warning.post() ? (\n              <li className=\"item-excerpt\">\n                <h3 className=\"WarningListItem-subtitle\">\n                  {app.translator.trans('askvortsov-moderator-warnings.forum.warning_list_item.linked_post')}\n                </h3>\n                {WarningPost.component({ post: warning.post() })}\n              </li>\n            ) : (\n              ''\n            )}\n            <li className=\"item-excerpt\">\n              <h3 className=\"WarningListItem-subtitle\">\n                {app.translator.trans('askvortsov-moderator-warnings.forum.warning_list_item.public_comment')}\n              </h3>\n              <p class=\"WarningListItem-comment\">{m.trust(warning.public_comment())}</p>\n            </li>\n            {app.session.user.canManageWarnings() && warning.private_comment() ? (\n              <li className=\"item-excerpt\">\n                <h3 className=\"WarningListItem-subtitle\">\n                  {app.translator.trans('askvortsov-moderator-warnings.forum.warning_list_item.private_comment')}\n                </h3>\n                <p class=\"WarningListItem-comment\">{m.trust(warning.private_comment())}</p>\n              </li>\n            ) : (\n              ''\n            )}\n          </ul>\n        </div>\n      </div>\n    );\n  }\n\n  elementAttrs() {\n    const { warning } = this.attrs;\n    const attrs = {};\n\n    attrs.className =\n      (attrs.className || '') +\n      ' ' +\n      classList({\n        WarningListItem: true,\n        'WarningListItem--hidden': warning.isHidden(),\n      });\n\n    return attrs;\n  }\n}\n","const __WEBPACK_NAMESPACE_OBJECT__ = flarum.core.compat['helpers/listItems'];","import Component from 'flarum/Component';\nimport app from 'flarum/app';\nimport LoadingIndicator from 'flarum/components/LoadingIndicator';\nimport WarningListItem from './WarningListItem';\nimport Button from 'flarum/components/Button';\nimport WarningModal from './WarningModal';\nimport listItems from 'flarum/helpers/listItems';\nimport ItemList from 'flarum/utils/ItemList';\n\nexport default class WarningList extends Component {\n  oninit(vnode) {\n    super.oninit(vnode);\n    this.loading = true;\n    this.warnings = [];\n    this.user = this.attrs.params.user;\n    this.refresh();\n  }\n\n  view() {\n    let loading;\n\n    if (this.loading) {\n      loading = LoadingIndicator.component({ size: 'large' });\n    }\n\n    return (\n      <div className=\"WarningList\">\n        <h1 className=\"WarningList-warnings\">\n          {this.strikeCount()\n            ? app.translator.trans('askvortsov-moderator-warnings.forum.warning_list.warnings', { strikes: this.strikeCount() || 0 })\n            : app.translator.trans('askvortsov-moderator-warnings.forum.warning_list.warnings_no_strikes')}\n        </h1>\n        <div class=\"Warnings-toolbar\">\n          <ul className=\"Warnings-toolbar-action\">{listItems(this.actionItems().toArray())}</ul>\n        </div>\n        <ul className=\"WarningList-Warnings\">\n          {this.warnings.map((warning) => {\n            return (\n              <li key={warning.id()} data-id={warning.id()}>\n                {WarningListItem.component({ warning })}\n              </li>\n            );\n          })}\n          {!this.loading && this.warnings.length === 0 && (\n            <label>{app.translator.trans('askvortsov-moderator-warnings.forum.warning_list.no_warnings')}</label>\n          )}\n        </ul>\n        <div className=\"WarningList-loadMore\">{loading}</div>\n      </div>\n    );\n  }\n\n  actionItems() {\n    const items = new ItemList();\n\n    if (app.session.user.canManageWarnings()) {\n      items.add(\n        'create_warning',\n        <Button className=\"Button Button--primary\" onclick={this.handleOnClickCreate.bind(this)}>\n          {app.translator.trans('askvortsov-moderator-warnings.forum.warning_list.add_button')}\n        </Button>\n      );\n    }\n\n    return items;\n  }\n\n  strikeCount() {\n    return this.warnings\n      .filter((warning) => !warning.isHidden())\n      .map((warning) => warning.strikes())\n      .reduce((a, b) => a + b, 0);\n  }\n\n  parseResults(results) {\n    [].push.apply(this.warnings, results);\n    this.loading = false;\n    m.redraw();\n\n    return results;\n  }\n\n  refresh() {\n    return app.store\n      .find('warnings', this.user.id())\n      .catch(() => {})\n      .then((results) => {\n        this.warnings = [];\n        this.parseResults(results);\n      });\n  }\n\n  handleOnClickCreate(e) {\n    e.preventDefault();\n    app.modal.show(WarningModal, {\n      callback: this.refresh.bind(this),\n      ...this.attrs.params,\n    });\n  }\n}\n","import UserPage from 'flarum/components/UserPage';\nimport WarningList from './WarningList';\n\nexport default class WarningPage extends UserPage {\n  oninit(vnode) {\n    super.oninit(vnode);\n\n    this.loadUser(m.route.param('username'));\n  }\n\n  content() {\n    if (\n      app.session.user &&\n      (app.session.user.canViewWarnings() || (this.user.id() === app.session.user.id() && this.user.visibleWarningCount() > 0))\n    ) {\n      return (\n        <div className=\"WarningsUserPage\">\n          {WarningList.component({\n            params: {\n              user: this.user,\n              sort: 'newest',\n            },\n          })}\n        </div>\n      );\n    }\n  }\n}\n","import { extend } from 'flarum/extend';\nimport UserPage from 'flarum/components/UserPage';\nimport LinkButton from 'flarum/components/LinkButton';\nimport WarningPage from './components/WarningPage';\n\nexport default function () {\n  app.routes['user.warnings'] = {\n    path: '/u/:username/warnings',\n    component: WarningPage,\n  };\n\n  extend(UserPage.prototype, 'navItems', function (items) {\n    if (\n      app.session.user &&\n      (app.session.user.canViewWarnings() || (this.user.id() === app.session.user.id() && this.user.visibleWarningCount() > 0))\n    ) {\n      items.add(\n        'warnings',\n        LinkButton.component(\n          {\n            href: app.route('user.warnings', {\n              username: this.user.username(),\n            }),\n            icon: 'fas fa-exclamation-circle',\n          },\n          [\n            app.translator.trans('askvortsov-moderator-warnings.forum.user.warnings'),\n            this.user.visibleWarningCount() > 0 ? <span className=\"Button-badge\">{this.user.visibleWarningCount()}</span> : '',\n          ]\n        ),\n        10\n      );\n    }\n  });\n}\n","const __WEBPACK_NAMESPACE_OBJECT__ = flarum.core.compat['models/Post'];","const __WEBPACK_NAMESPACE_OBJECT__ = flarum.core.compat['components/CommentPost'];","const __WEBPACK_NAMESPACE_OBJECT__ = flarum.core.compat['helpers/icon'];","import Component from 'flarum/Component';\nimport Link from 'flarum/components/Link';\nimport WarningListItem from './WarningListItem';\n\nexport default class WarningPreview extends Component {\n  oninit(vnode) {\n    super.oninit(vnode);\n\n    this.warning = this.attrs.warning;\n  }\n\n  view() {\n    return (\n      <Link\n        className=\"WarningPreview\"\n        href={app.route('user.warnings', {\n          username: this.warning.warnedUser().username(),\n        })}\n      >\n        <WarningListItem warning={this.warning}></WarningListItem>\n      </Link>\n    );\n  }\n}\n","import Component from 'flarum/Component';\nimport icon from 'flarum/helpers/icon';\nimport username from 'flarum/helpers/username';\nimport WarningPreview from './WarningPreview';\n\nexport default class PostWarning extends Component {\n  oninit(vnode) {\n    super.oninit(vnode);\n\n    this.warning = this.attrs.warning;\n  }\n\n  view() {\n    return (\n      <div className=\"Post-warning\">\n        <span className=\"Post-warning-summary\">\n          {icon('fas fa-exclamation-circle')}\n          {this.warning.strikes()\n            ? app.translator.trans('askvortsov-moderator-warnings.forum.post.warning', {\n                strikes: this.warning.strikes() || 0,\n                mod_username: username(this.warning.addedByUser()),\n              })\n            : app.translator.trans('askvortsov-moderator-warnings.forum.post.warning_no_strikes', {\n                mod_username: username(this.warning.addedByUser()),\n              })}\n        </span>\n      </div>\n    );\n  }\n\n  oncreate(vnode) {\n    super.oncreate(vnode);\n\n    const warning = this.warning;\n\n    let timeout;\n\n    const hidePreview = () => {\n      this.$('.Post-warning-preview')\n        .removeClass('in')\n        .one('transitionend', function () {\n          $(this).hide();\n        });\n    };\n\n    const $preview = $('<ul class=\"Dropdown-menu Post-warning-preview fade\"/>');\n    this.$().append($preview);\n\n    this.$()\n      .children()\n      .hover(\n        function () {\n          clearTimeout(timeout);\n          timeout = setTimeout(function () {\n            if (!$preview.hasClass('in') && $preview.is(':visible')) return;\n\n            // When the user hovers their mouse over the list of people who have\n            // replied to the post, render a list of reply previews into a\n            // popup.\n            m.render($preview[0], <li data-id={warning.id()}>{WarningPreview.component({ warning })}</li>);\n            $preview.show();\n            setTimeout(() => $preview.off('transitionend').addClass('in'));\n          }, 200);\n        },\n        function () {\n          clearTimeout(timeout);\n          timeout = setTimeout(hidePreview, 250);\n        }\n      );\n\n    // Whenever the user hovers their mouse over a particular name in the\n    // list of repliers, highlight the corresponding post in the preview\n    // popup.\n    $('.Post-warning')\n      .find('.Post-warning-summary a')\n      .hover(\n        function () {\n          $('.Post-warning')\n            .find('[data-number=\"' + $(this).data('number') + '\"]')\n            .addClass('active');\n        },\n        function () {\n          $('.Post-warning').find('[data-number]').removeClass('active');\n        }\n      );\n  }\n}\n","import Component from 'flarum/Component';\nimport PostWarning from './PostWarning';\nimport WarningPreview from './WarningPreview';\n\nexport default class PostWarningList extends Component {\n  oninit(vnode) {\n    super.oninit(vnode);\n\n    this.post = this.attrs.post;\n  }\n\n  view() {\n    return (\n      <div className=\"Post-warning-list\">\n        {this.attrs.post.warnings().map((warning) => {\n          return PostWarning.component({ warning });\n        })}\n      </div>\n    );\n  }\n}\n","const __WEBPACK_NAMESPACE_OBJECT__ = flarum.core.compat['components/Notification'];","import Notification from 'flarum/components/Notification';\nimport username from 'flarum/helpers/username';\n\nexport default class WarningNotification extends Notification {\n  icon() {\n    return 'fas fa-exclamation-circle';\n  }\n\n  href() {\n    return app.route('user.warnings', {\n      username: app.session.user.username(),\n    });\n  }\n\n  content() {\n    const warning = this.attrs.notification.subject();\n\n    if (warning.strikes()) {\n      return app.translator.trans('askvortsov-moderator-warnings.forum.notifications.warning_text', {\n        mod_username: username(this.attrs.notification.fromUser()),\n        strikes: warning.strikes() || 0,\n      });\n    } else {\n      return app.translator.trans('askvortsov-moderator-warnings.forum.notifications.warning_no_strikes_text', {\n        mod_username: username(this.attrs.notification.fromUser()),\n      });\n    }\n  }\n}\n","const __WEBPACK_NAMESPACE_OBJECT__ = flarum.core.compat['utils/computed'];","import Model from 'flarum/Model';\nimport computed from 'flarum/utils/computed';\n\nexport default class Warnings extends Model {}\nObject.assign(Warnings.prototype, {\n  id: Model.attribute('id'),\n  public_comment: Model.attribute('public_comment'),\n  private_comment: Model.attribute('private_comment'),\n  strikes: Model.attribute('strikes'),\n\n  createdAt: Model.attribute('createdAt', Model.transformDate),\n  isHidden: computed('hiddenAt', (hiddenAt) => !!hiddenAt),\n  hiddenAt: Model.attribute('hiddenAt', Model.transformDate),\n\n  warnedUser: Model.hasOne('warnedUser'),\n  hiddenByUser: Model.hasOne('hiddenByUser'),\n  addedByUser: Model.hasOne('addedByUser'),\n\n  post: Model.hasOne('post'),\n});\n","import app from 'flarum/app';\nimport NotificationGrid from 'flarum/components/NotificationGrid';\nimport { Extend } from '@flarum/core/forum';\nimport { extend } from 'flarum/extend';\nimport User from 'flarum/models/User';\nimport Model from 'flarum/Model';\nimport addWarningControl from './addWarningControl';\nimport addWarningPage from './addWarningPage';\nimport addWarningsToPosts from './addWarningsToPosts';\nimport WarningNotification from './components/WarningNotification';\nimport Warning from './model/Warning';\n\napp.initializers.add('askvortsov/flarum-moderator-warnings', (app) => {\n  app.store.models.warnings = Warning;\n  User.prototype.canViewWarnings = Model.attribute('canViewWarnings');\n  User.prototype.canManageWarnings = Model.attribute('canManageWarnings');\n  User.prototype.canDeleteWarnings = Model.attribute('canDeleteWarnings');\n  User.prototype.visibleWarningCount = Model.attribute('visibleWarningCount');\n  addWarningControl();\n  addWarningPage();\n  addWarningsToPosts();\n\n  app.notificationComponents.warning = WarningNotification;\n  extend(NotificationGrid.prototype, 'notificationTypes', function (items) {\n    items.add('warning', {\n      name: 'warning',\n      icon: 'fas fa-exclamation-circle',\n      label: app.translator.trans('askvortsov-moderator-warnings.forum.settings.warning_notification_label'),\n    });\n  });\n});\n","import { extend } from 'flarum/extend';\nimport app from 'flarum/app';\nimport PostControls from 'flarum/utils/PostControls';\nimport UserControls from 'flarum/utils/UserControls';\nimport Button from 'flarum/components/Button';\n\nimport WarningModal from './components/WarningModal';\n\nexport default function () {\n  extend(PostControls, 'moderationControls', function (items, post) {\n    if (!app.session.user || !app.session.user.canManageWarnings()) return;\n\n    items.add(\n      'warning',\n      <Button\n        icon=\"fas fa-exclamation-circle\"\n        onclick={() =>\n          app.modal.show(WarningModal, {\n            callback: () => {\n              location.reload();\n            },\n            user: post.user(),\n            post: post,\n          })\n        }\n      >\n        {app.translator.trans('askvortsov-moderator-warnings.forum.post_controls.warning_button')}\n      </Button>\n    );\n  });\n\n  extend(UserControls, 'moderationControls', function (items, user) {\n    if (!app.session.user || !app.session.user.canManageWarnings()) return;\n\n    items.add(\n      'warning',\n      <Button\n        icon=\"fas fa-exclamation-circle\"\n        onclick={() =>\n          app.modal.show(WarningModal, {\n            callback: () => {\n              location.reload();\n            },\n            user: user,\n          })\n        }\n      >\n        {app.translator.trans('askvortsov-moderator-warnings.forum.post_controls.warning_button')}\n      </Button>\n    );\n  });\n}\n","import { extend } from 'flarum/extend';\nimport Model from 'flarum/Model';\nimport Post from 'flarum/models/Post';\nimport CommentPost from 'flarum/components/CommentPost';\nimport PostWarningList from './components/PostWarningList';\n\nexport default function addWarningsToPosts() {\n  Post.prototype.warnings = Model.hasMany('warnings');\n\n  extend(CommentPost.prototype, 'footerItems', function (items) {\n    const post = this.attrs.post;\n    const warnings = post.warnings();\n\n    if (!warnings) return;\n    items.add(\n      `warnings`,\n      PostWarningList.component({\n        post: post,\n      })\n    );\n  });\n}\n"],"names":["__webpack_require__","module","getter","__esModule","d","a","exports","definition","key","o","Object","defineProperty","enumerable","get","obj","prop","prototype","hasOwnProperty","call","Symbol","toStringTag","value","flarum","core","compat","_setPrototypeOf","p","setPrototypeOf","bind","__proto__","_inheritsLoose","subClass","superClass","create","constructor","WarningModal","_Modal","apply","arguments","_proto","oninit","vnode","this","publicComment","Stream","privateComment","strikes","className","title","app","translator","trans","username","attrs","user","content","m","type","bidi","min","max","required","rows","Button","loading","onsubmit","e","preventDefault","alerts","dismiss","successAlert","newWarning","userId","id","public_comment","private_comment","post","store","createRecord","save","then","hide","show","callback","Modal","_extends","assign","target","i","length","source","WarningPost","_Component","view","class","PostPreview","oncreate","$","css","Component","controls","warning","context","_this","items","ItemList","forEach","section","toArray","item","add","itemName","Separator","userControls","moderationControls","destructiveControls","isHidden","session","canManageWarnings","icon","onclick","hideAction","restoreAction","canDeleteWarnings","deleteAction","pushAttributes","hiddenAt","Date","hiddenUser","redraw","location","reload","WarningListItem","addedByUser","WarningControls","elementAttrs","Dropdown","buttonClassName","Link","href","route","avatar","time","humanTime","createdAt","component","trust","classList","WarningList","warnings","params","refresh","LoadingIndicator","size","strikeCount","listItems","actionItems","map","handleOnClickCreate","filter","reduce","b","parseResults","results","push","find","WarningPage","_UserPage","loadUser","param","canViewWarnings","visibleWarningCount","sort","UserPage","routes","path","extend","LinkButton","WarningPreview","warnedUser","PostWarning","mod_username","timeout","hidePreview","removeClass","one","$preview","append","children","hover","clearTimeout","setTimeout","hasClass","is","render","off","addClass","data","PostWarningList","WarningNotification","_Notification","notification","subject","fromUser","Notification","Warnings","_Model","Model","computed","hiddenByUser","models","Warning","User","PostControls","UserControls","addWarningPage","Post","CommentPost","notificationComponents","NotificationGrid","name","label"],"sourceRoot":""}