{"version":3,"file":"forum.js","mappings":"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","sources":["webpack://@fof/drafts/./node_modules/dayjs/dayjs.min.js","webpack://@fof/drafts/external assign \"flarum.extensions['fof-byobu']\"","webpack://@fof/drafts/webpack/bootstrap","webpack://@fof/drafts/webpack/runtime/compat get default export","webpack://@fof/drafts/webpack/runtime/define property getters","webpack://@fof/drafts/webpack/runtime/hasOwnProperty shorthand","webpack://@fof/drafts/webpack/runtime/make namespace object","webpack://@fof/drafts/external root \"flarum.core.compat['common/extend']\"","webpack://@fof/drafts/external root \"flarum.core.compat['common/models/User']\"","webpack://@fof/drafts/external root \"flarum.core.compat['common/Model']\"","webpack://@fof/drafts/external root \"flarum.core.compat['common/utils/Stream']\"","webpack://@fof/drafts/./node_modules/@babel/runtime/helpers/esm/setPrototypeOf.js","webpack://@fof/drafts/./node_modules/@babel/runtime/helpers/esm/inheritsLoose.js","webpack://@fof/drafts/external root \"flarum.core.compat['forum/app']\"","webpack://@fof/drafts/external root \"flarum.core.compat['common/utils/ItemList']\"","webpack://@fof/drafts/external root \"flarum.core.compat['common/utils/mixin']\"","webpack://@fof/drafts/./src/forum/utils/fillRelationship.js","webpack://@fof/drafts/./src/forum/models/Draft.js","webpack://@fof/drafts/external root \"flarum.core.compat['common/components/Page']\"","webpack://@fof/drafts/external root \"flarum.core.compat['common/Component']\"","webpack://@fof/drafts/external root \"flarum.core.compat['common/components/LoadingIndicator']\"","webpack://@fof/drafts/external root \"flarum.core.compat['common/components/Button']\"","webpack://@fof/drafts/external root \"flarum.core.compat['common/helpers/avatar']\"","webpack://@fof/drafts/external root \"flarum.core.compat['common/helpers/icon']\"","webpack://@fof/drafts/external root \"flarum.core.compat['common/helpers/humanTime']\"","webpack://@fof/drafts/external root \"flarum.core.compat['common/utils/string']\"","webpack://@fof/drafts/external root \"flarum.core.compat['common/components/Tooltip']\"","webpack://@fof/drafts/./src/forum/components/DraftsListItem.tsx","webpack://@fof/drafts/./src/forum/components/DraftsList.js","webpack://@fof/drafts/./src/forum/components/DraftsPage.js","webpack://@fof/drafts/external root \"flarum.core.compat['common/components/HeaderSecondary']\"","webpack://@fof/drafts/external root \"flarum.core.compat['common/components/NotificationsDropdown']\"","webpack://@fof/drafts/./src/forum/components/DraftsDropdown.js","webpack://@fof/drafts/external root \"flarum.core.compat['common/components/FieldSet']\"","webpack://@fof/drafts/external root \"flarum.core.compat['common/components/SettingsPage']\"","webpack://@fof/drafts/external root \"flarum.core.compat['common/components/Switch']\"","webpack://@fof/drafts/external root \"flarum.core.compat['forum/components/Composer']\"","webpack://@fof/drafts/external root \"flarum.core.compat['forum/components/DiscussionComposer']\"","webpack://@fof/drafts/external root \"flarum.core.compat['forum/components/ReplyComposer']\"","webpack://@fof/drafts/external root \"flarum.core.compat['forum/states/ComposerState']\"","webpack://@fof/drafts/external root \"flarum.core.compat['common/components/Alert']\"","webpack://@fof/drafts/external root \"flarum.core.compat['common/components/Modal']\"","webpack://@fof/drafts/./src/forum/components/ScheduleDraftModal.js","webpack://@fof/drafts/./src/forum/states/DraftsListState.js","webpack://@fof/drafts/./src/forum/components/index.js","webpack://@fof/drafts/./src/forum/models/index.js","webpack://@fof/drafts/./src/forum/states/index.js","webpack://@fof/drafts/./src/forum/utils/index.js","webpack://@fof/drafts/./src/forum/index.js","webpack://@fof/drafts/./src/forum/addDraftsDropdown.js","webpack://@fof/drafts/./src/forum/addPreferences.js"],"sourcesContent":["!function(t,e){\"object\"==typeof exports&&\"undefined\"!=typeof module?module.exports=e():\"function\"==typeof define&&define.amd?define(e):(t=\"undefined\"!=typeof globalThis?globalThis:t||self).dayjs=e()}(this,(function(){\"use strict\";var t=1e3,e=6e4,n=36e5,r=\"millisecond\",i=\"second\",s=\"minute\",u=\"hour\",a=\"day\",o=\"week\",f=\"month\",h=\"quarter\",c=\"year\",d=\"date\",$=\"Invalid Date\",l=/^(\\d{4})[-/]?(\\d{1,2})?[-/]?(\\d{0,2})[^0-9]*(\\d{1,2})?:?(\\d{1,2})?:?(\\d{1,2})?[.:]?(\\d+)?$/,y=/\\[([^\\]]+)]|Y{1,4}|M{1,4}|D{1,2}|d{1,4}|H{1,2}|h{1,2}|a|A|m{1,2}|s{1,2}|Z{1,2}|SSS/g,M={name:\"en\",weekdays:\"Sunday_Monday_Tuesday_Wednesday_Thursday_Friday_Saturday\".split(\"_\"),months:\"January_February_March_April_May_June_July_August_September_October_November_December\".split(\"_\")},m=function(t,e,n){var r=String(t);return!r||r.length>=e?t:\"\"+Array(e+1-r.length).join(n)+t},g={s:m,z:function(t){var e=-t.utcOffset(),n=Math.abs(e),r=Math.floor(n/60),i=n%60;return(e<=0?\"+\":\"-\")+m(r,2,\"0\")+\":\"+m(i,2,\"0\")},m:function t(e,n){if(e.date()<n.date())return-t(n,e);var r=12*(n.year()-e.year())+(n.month()-e.month()),i=e.clone().add(r,f),s=n-i<0,u=e.clone().add(r+(s?-1:1),f);return+(-(r+(n-i)/(s?i-u:u-i))||0)},a:function(t){return t<0?Math.ceil(t)||0:Math.floor(t)},p:function(t){return{M:f,y:c,w:o,d:a,D:d,h:u,m:s,s:i,ms:r,Q:h}[t]||String(t||\"\").toLowerCase().replace(/s$/,\"\")},u:function(t){return void 0===t}},D=\"en\",v={};v[D]=M;var p=function(t){return t instanceof _},S=function(t,e,n){var r;if(!t)return D;if(\"string\"==typeof t)v[t]&&(r=t),e&&(v[t]=e,r=t);else{var i=t.name;v[i]=t,r=i}return!n&&r&&(D=r),r||!n&&D},w=function(t,e){if(p(t))return t.clone();var n=\"object\"==typeof e?e:{};return n.date=t,n.args=arguments,new _(n)},O=g;O.l=S,O.i=p,O.w=function(t,e){return w(t,{locale:e.$L,utc:e.$u,x:e.$x,$offset:e.$offset})};var _=function(){function M(t){this.$L=S(t.locale,null,!0),this.parse(t)}var m=M.prototype;return m.parse=function(t){this.$d=function(t){var e=t.date,n=t.utc;if(null===e)return new Date(NaN);if(O.u(e))return new Date;if(e instanceof Date)return new Date(e);if(\"string\"==typeof e&&!/Z$/i.test(e)){var r=e.match(l);if(r){var i=r[2]-1||0,s=(r[7]||\"0\").substring(0,3);return n?new Date(Date.UTC(r[1],i,r[3]||1,r[4]||0,r[5]||0,r[6]||0,s)):new Date(r[1],i,r[3]||1,r[4]||0,r[5]||0,r[6]||0,s)}}return new Date(e)}(t),this.$x=t.x||{},this.init()},m.init=function(){var t=this.$d;this.$y=t.getFullYear(),this.$M=t.getMonth(),this.$D=t.getDate(),this.$W=t.getDay(),this.$H=t.getHours(),this.$m=t.getMinutes(),this.$s=t.getSeconds(),this.$ms=t.getMilliseconds()},m.$utils=function(){return O},m.isValid=function(){return!(this.$d.toString()===$)},m.isSame=function(t,e){var n=w(t);return this.startOf(e)<=n&&n<=this.endOf(e)},m.isAfter=function(t,e){return w(t)<this.startOf(e)},m.isBefore=function(t,e){return this.endOf(e)<w(t)},m.$g=function(t,e,n){return O.u(t)?this[e]:this.set(n,t)},m.unix=function(){return Math.floor(this.valueOf()/1e3)},m.valueOf=function(){return this.$d.getTime()},m.startOf=function(t,e){var n=this,r=!!O.u(e)||e,h=O.p(t),$=function(t,e){var i=O.w(n.$u?Date.UTC(n.$y,e,t):new Date(n.$y,e,t),n);return r?i:i.endOf(a)},l=function(t,e){return O.w(n.toDate()[t].apply(n.toDate(\"s\"),(r?[0,0,0,0]:[23,59,59,999]).slice(e)),n)},y=this.$W,M=this.$M,m=this.$D,g=\"set\"+(this.$u?\"UTC\":\"\");switch(h){case c:return r?$(1,0):$(31,11);case f:return r?$(1,M):$(0,M+1);case o:var D=this.$locale().weekStart||0,v=(y<D?y+7:y)-D;return $(r?m-v:m+(6-v),M);case a:case d:return l(g+\"Hours\",0);case u:return l(g+\"Minutes\",1);case s:return l(g+\"Seconds\",2);case i:return l(g+\"Milliseconds\",3);default:return this.clone()}},m.endOf=function(t){return this.startOf(t,!1)},m.$set=function(t,e){var n,o=O.p(t),h=\"set\"+(this.$u?\"UTC\":\"\"),$=(n={},n[a]=h+\"Date\",n[d]=h+\"Date\",n[f]=h+\"Month\",n[c]=h+\"FullYear\",n[u]=h+\"Hours\",n[s]=h+\"Minutes\",n[i]=h+\"Seconds\",n[r]=h+\"Milliseconds\",n)[o],l=o===a?this.$D+(e-this.$W):e;if(o===f||o===c){var y=this.clone().set(d,1);y.$d[$](l),y.init(),this.$d=y.set(d,Math.min(this.$D,y.daysInMonth())).$d}else $&&this.$d[$](l);return this.init(),this},m.set=function(t,e){return this.clone().$set(t,e)},m.get=function(t){return this[O.p(t)]()},m.add=function(r,h){var d,$=this;r=Number(r);var l=O.p(h),y=function(t){var e=w($);return O.w(e.date(e.date()+Math.round(t*r)),$)};if(l===f)return this.set(f,this.$M+r);if(l===c)return this.set(c,this.$y+r);if(l===a)return y(1);if(l===o)return y(7);var M=(d={},d[s]=e,d[u]=n,d[i]=t,d)[l]||1,m=this.$d.getTime()+r*M;return O.w(m,this)},m.subtract=function(t,e){return this.add(-1*t,e)},m.format=function(t){var e=this;if(!this.isValid())return $;var n=t||\"YYYY-MM-DDTHH:mm:ssZ\",r=O.z(this),i=this.$locale(),s=this.$H,u=this.$m,a=this.$M,o=i.weekdays,f=i.months,h=function(t,r,i,s){return t&&(t[r]||t(e,n))||i[r].substr(0,s)},c=function(t){return O.s(s%12||12,t,\"0\")},d=i.meridiem||function(t,e,n){var r=t<12?\"AM\":\"PM\";return n?r.toLowerCase():r},l={YY:String(this.$y).slice(-2),YYYY:this.$y,M:a+1,MM:O.s(a+1,2,\"0\"),MMM:h(i.monthsShort,a,f,3),MMMM:h(f,a),D:this.$D,DD:O.s(this.$D,2,\"0\"),d:String(this.$W),dd:h(i.weekdaysMin,this.$W,o,2),ddd:h(i.weekdaysShort,this.$W,o,3),dddd:o[this.$W],H:String(s),HH:O.s(s,2,\"0\"),h:c(1),hh:c(2),a:d(s,u,!0),A:d(s,u,!1),m:String(u),mm:O.s(u,2,\"0\"),s:String(this.$s),ss:O.s(this.$s,2,\"0\"),SSS:O.s(this.$ms,3,\"0\"),Z:r};return n.replace(y,(function(t,e){return e||l[t]||r.replace(\":\",\"\")}))},m.utcOffset=function(){return 15*-Math.round(this.$d.getTimezoneOffset()/15)},m.diff=function(r,d,$){var l,y=O.p(d),M=w(r),m=(M.utcOffset()-this.utcOffset())*e,g=this-M,D=O.m(this,M);return D=(l={},l[c]=D/12,l[f]=D,l[h]=D/3,l[o]=(g-m)/6048e5,l[a]=(g-m)/864e5,l[u]=g/n,l[s]=g/e,l[i]=g/t,l)[y]||g,$?D:O.a(D)},m.daysInMonth=function(){return this.endOf(f).$D},m.$locale=function(){return v[this.$L]},m.locale=function(t,e){if(!t)return this.$L;var n=this.clone(),r=S(t,e,!0);return r&&(n.$L=r),n},m.clone=function(){return O.w(this.$d,this)},m.toDate=function(){return new Date(this.valueOf())},m.toJSON=function(){return this.isValid()?this.toISOString():null},m.toISOString=function(){return this.$d.toISOString()},m.toString=function(){return this.$d.toUTCString()},M}(),b=_.prototype;return w.prototype=b,[[\"$ms\",r],[\"$s\",i],[\"$m\",s],[\"$H\",u],[\"$W\",a],[\"$M\",f],[\"$y\",c],[\"$D\",d]].forEach((function(t){b[t[1]]=function(e){return this.$g(e,t[0],t[1])}})),w.extend=function(t,e){return t.$i||(t(e,_,w),t.$i=!0),w},w.locale=S,w.isDayjs=p,w.unix=function(t){return w(1e3*t)},w.en=v[D],w.Ls=v,w.p={},w}));","module.exports = flarum.extensions['fof-byobu'];","// The module cache\nvar __webpack_module_cache__ = {};\n\n// The require function\nfunction __webpack_require__(moduleId) {\n\t// Check if module is in cache\n\tvar cachedModule = __webpack_module_cache__[moduleId];\n\tif (cachedModule !== undefined) {\n\t\treturn cachedModule.exports;\n\t}\n\t// Create a new module (and put it into the cache)\n\tvar module = __webpack_module_cache__[moduleId] = {\n\t\t// no module.id needed\n\t\t// no module.loaded needed\n\t\texports: {}\n\t};\n\n\t// Execute the module function\n\t__webpack_modules__[moduleId].call(module.exports, module, module.exports, __webpack_require__);\n\n\t// Return the exports of the module\n\treturn module.exports;\n}\n\n","// getDefaultExport function for compatibility with non-harmony modules\n__webpack_require__.n = (module) => {\n\tvar getter = module && module.__esModule ?\n\t\t() => (module['default']) :\n\t\t() => (module);\n\t__webpack_require__.d(getter, { a: getter });\n\treturn getter;\n};","// define getter functions for harmony exports\n__webpack_require__.d = (exports, definition) => {\n\tfor(var key in definition) {\n\t\tif(__webpack_require__.o(definition, key) && !__webpack_require__.o(exports, key)) {\n\t\t\tObject.defineProperty(exports, key, { enumerable: true, get: definition[key] });\n\t\t}\n\t}\n};","__webpack_require__.o = (obj, prop) => (Object.prototype.hasOwnProperty.call(obj, prop))","// define __esModule on exports\n__webpack_require__.r = (exports) => {\n\tif(typeof Symbol !== 'undefined' && Symbol.toStringTag) {\n\t\tObject.defineProperty(exports, Symbol.toStringTag, { value: 'Module' });\n\t}\n\tObject.defineProperty(exports, '__esModule', { value: true });\n};","const __WEBPACK_NAMESPACE_OBJECT__ = flarum.core.compat['common/extend'];","const __WEBPACK_NAMESPACE_OBJECT__ = flarum.core.compat['common/models/User'];","const __WEBPACK_NAMESPACE_OBJECT__ = flarum.core.compat['common/Model'];","const __WEBPACK_NAMESPACE_OBJECT__ = flarum.core.compat['common/utils/Stream'];","export default function _setPrototypeOf(o, p) {\n  _setPrototypeOf = Object.setPrototypeOf || function _setPrototypeOf(o, p) {\n    o.__proto__ = p;\n    return o;\n  };\n\n  return _setPrototypeOf(o, p);\n}","import setPrototypeOf from \"./setPrototypeOf.js\";\nexport default function _inheritsLoose(subClass, superClass) {\n  subClass.prototype = Object.create(superClass.prototype);\n  subClass.prototype.constructor = subClass;\n  setPrototypeOf(subClass, superClass);\n}","const __WEBPACK_NAMESPACE_OBJECT__ = flarum.core.compat['forum/app'];","const __WEBPACK_NAMESPACE_OBJECT__ = flarum.core.compat['common/utils/ItemList'];","const __WEBPACK_NAMESPACE_OBJECT__ = flarum.core.compat['common/utils/mixin'];","export default (data, map) => (Array.isArray(data) ? data.map(map).sort() : map(data));\n","/*\n *\n *  This file is part of fof/drafts.\n *\n *  Copyright (c) 2019 FriendsOfFlarum.\n *\n *  For the full copyright and license information, please view the LICENSE.md\n *  file that was distributed with this source code.\n *\n */\n\nimport app from 'flarum/forum/app';\nimport Model from 'flarum/common/Model';\nimport ItemList from 'flarum/common/utils/ItemList';\nimport mixin from 'flarum/common/utils/mixin';\nimport fillRelationship from '../utils/fillRelationship';\n\nexport default class Draft extends mixin(Model, {\n  user: Model.hasOne('user'),\n  content: Model.attribute('content'),\n  title: Model.attribute('title'),\n  scheduledValidationError: Model.attribute('scheduledValidationError'),\n  relationships: Model.attribute('relationships'),\n  extra: Model.attribute('extra'),\n  scheduledFor: Model.attribute('scheduledFor', Model.transformDate),\n  updatedAt: Model.attribute('updatedAt', Model.transformDate),\n\n  loadedRelationships: null,\n\n  type() {\n    const relationships = this.loadRelationships();\n    if (relationships.discussion) {\n      return 'reply';\n    } else if (\n      flarum.extensions['fof-byobu'] &&\n      flarum.extensions['fof-byobu'].discussions && // If private discussion composer is not exported, we can't support PM drafts.\n      ('recipientGroups' in relationships || 'recipientUsers' in relationships)\n    ) {\n      return 'privateDiscussion';\n    } else {\n      return 'discussion';\n    }\n  },\n\n  icon() {\n    switch (this.type()) {\n      case 'discussion':\n        return 'fas fa-edit';\n      case 'reply':\n        return 'fas fa-reply';\n      case 'privateDiscussion':\n        const customIcon = app.forum.data.attributes['byobu.icon-badge'];\n        return customIcon ? customIcon : 'fas fa-eye-slash';\n    }\n  },\n\n  loadRelationships(force) {\n    if (\n      !force &&\n      this.loadedRelationships &&\n      (Object.keys(this.loadedRelationships).length > 0 ||\n        (Object.keys(this.loadedRelationships).length === 0 && Object.keys(this.relationships).length === 0))\n    ) {\n      return this.loadedRelationships;\n    }\n\n    this.loadedRelationships = {};\n\n    const relationships = this.relationships();\n\n    if (relationships) {\n      Object.keys(relationships).forEach((relationshipName) => {\n        const relationship = relationships[relationshipName];\n\n        if (!relationship || !relationship.data) return;\n\n        this.loadedRelationships[relationshipName] = fillRelationship(relationship.data, (model) => app.store.getById(model.type, model.id));\n      });\n    }\n\n    if ('recipientUsers' in this.loadedRelationships || 'recipientGroups' in this.loadedRelationships) {\n      const recipients = new ItemList();\n\n      (this.loadedRelationships['recipientUsers'] || []).forEach((user) => {\n        if (user) recipients.add('users:' + user.id(), user);\n      });\n      (this.loadedRelationships['recipientGroups'] || []).forEach((group) => {\n        if (group) recipients.add('groups:' + group.id(), group);\n      });\n\n      this.loadedRelationships['recipients'] = recipients;\n    }\n\n    return this.loadedRelationships;\n  },\n\n  compileData() {\n    const data = {\n      originalContent: this.content(),\n      title: this.title(),\n      user: app.session.user,\n      confirmExit: app.translator.trans('fof-drafts.forum.composer.exit_alert'),\n      draft: this,\n      fields: Object.assign({}, this.loadRelationships(), this.extra()),\n    };\n\n    Object.assign(data, data.fields);\n\n    return data;\n  },\n}) {}\n","const __WEBPACK_NAMESPACE_OBJECT__ = flarum.core.compat['common/components/Page'];","const __WEBPACK_NAMESPACE_OBJECT__ = flarum.core.compat['common/Component'];","const __WEBPACK_NAMESPACE_OBJECT__ = flarum.core.compat['common/components/LoadingIndicator'];","const __WEBPACK_NAMESPACE_OBJECT__ = flarum.core.compat['common/components/Button'];","const __WEBPACK_NAMESPACE_OBJECT__ = flarum.core.compat['common/helpers/avatar'];","const __WEBPACK_NAMESPACE_OBJECT__ = flarum.core.compat['common/helpers/icon'];","const __WEBPACK_NAMESPACE_OBJECT__ = flarum.core.compat['common/helpers/humanTime'];","const __WEBPACK_NAMESPACE_OBJECT__ = flarum.core.compat['common/utils/string'];","const __WEBPACK_NAMESPACE_OBJECT__ = flarum.core.compat['common/components/Tooltip'];","import app from 'flarum/forum/app';\nimport Component from 'flarum/common/Component';\nimport avatar from 'flarum/common/helpers/avatar';\nimport icon from 'flarum/common/helpers/icon';\nimport humanTime from 'flarum/common/helpers/humanTime';\nimport { truncate } from 'flarum/common/utils/string';\nimport Button from 'flarum/common/components/Button';\nimport Tooltip from 'flarum/common/components/Tooltip';\nimport dayjs from 'dayjs';\n\nimport type Mithril from 'mithril';\nimport Draft from '../models/Draft';\nimport DraftsListState from '../states/DraftsListState';\n\nexport interface IAttrs {\n  draft: Draft;\n  state: DraftsListState;\n}\n\nexport default class DraftsListItem extends Component<IAttrs> {\n  private canSchedule: boolean = app.forum.attribute<boolean>('canScheduleDrafts') && app.forum.attribute<boolean>('drafts.enableScheduledDrafts');\n\n  oncreate(vnode: Mithril.Vnode) {\n    super.oncreate(vnode);\n  }\n\n  view() {\n    const { draft, state } = this.attrs;\n\n    let scheduledDraftIcon = 'far fa-calendar-plus';\n    if (draft.scheduledValidationError()) scheduledDraftIcon = 'far fa-calendar-times';\n    else if (draft.scheduledFor()) scheduledDraftIcon = 'far fa-calendar-check';\n\n    return (\n      <li>\n        <a onclick={state.showComposer.bind(state, draft)} className=\"Notification draft--item\">\n          {/* Avatar */}\n          {avatar(draft.user())}\n\n          {/* Draft icon */}\n          {icon(draft.icon(), { className: 'Notification-icon' })}\n\n          {/* Draft title + last edited time */}\n          <span class=\"Notification-title\">\n            <span className=\"Notification-content\">\n              {draft.scheduledFor() && (\n                <Tooltip\n                  showOnFocus={false}\n                  text={app.translator.trans('fof-drafts.forum.dropdown.scheduled_icon_tooltip', {\n                    datetime: dayjs(draft.scheduledFor()).format(\n                      app.translator.trans('fof-drafts.forum.dropdown.scheduled_icon_tooltip_formatter')[0]\n                    ),\n                  })}\n                >\n                  {icon('far fa-clock', { className: 'draft--scheduledIcon' })}\n                </Tooltip>\n              )}\n              {draft.type() === 'reply' ? draft.loadRelationships().discussion.title() : draft.title()}\n            </span>\n            <span class=\"Notification-title-spring\" />\n            {humanTime(draft.updatedAt())}\n          </span>\n\n          <div class=\"Notification-action\">\n            {/* Delete draft icon */}\n            <Tooltip showOnFocus={false} text={app.translator.trans('fof-drafts.forum.dropdown.delete_button')}>\n              <Button\n                data-container=\"body\"\n                icon=\"fas fa-trash-alt\"\n                className=\"Notification-action Button Button--link hasIcon draft--delete\"\n                onclick={(e: MouseEvent) => {\n                  state.deleteDraft(draft);\n                  e.stopPropagation();\n                }}\n              />\n            </Tooltip>\n\n            {this.canSchedule ? (\n              <Tooltip showOnFocus={false} text={app.translator.trans('fof-drafts.forum.dropdown.schedule_button')}>\n                <Button\n                  data-container=\"body\"\n                  icon={scheduledDraftIcon}\n                  className=\"Notification-action Button Button--link hasIcon draft--schedule\"\n                  onclick={(e: MouseEvent) => {\n                    state.scheduleDraft(draft);\n                    e.stopPropagation();\n                  }}\n                />\n              </Tooltip>\n            ) : null}\n          </div>\n\n          <div className=\"Notification-excerpt\">{truncate(draft.content(), 200)}</div>\n          {draft.scheduledValidationError() ? <p className=\"scheduledValidationError\">{draft.scheduledValidationError()}</p> : ''}\n        </a>\n      </li>\n    );\n  }\n}\n","/*\n *\n *  This file is part of fof/drafts.\n *\n *  Copyright (c) 2019 FriendsOfFlarum.\n *\n *  For the full copyright and license information, please view the LICENSE.md\n *  file that was distributed with this source code.\n *\n */\n\nimport app from 'flarum/forum/app';\nimport Component from 'flarum/common/Component';\nimport LoadingIndicator from 'flarum/common/components/LoadingIndicator';\nimport Button from 'flarum/common/components/Button';\nimport DraftsListItem from './DraftsListItem';\nimport Tooltip from 'flarum/common/components/Tooltip';\n\nexport default class DraftsList extends Component {\n  oncreate(vnode) {\n    super.oncreate(vnode);\n\n    $('.draft--delete').on('click tap', function (event) {\n      event.stopPropagation();\n    });\n  }\n\n  deleteAll() {\n    if (!confirm(app.translator.trans('fof-drafts.forum.dropdown.delete_all_alert'))) return;\n\n    app\n      .request({\n        method: 'DELETE',\n        url: app.forum.attribute('apiUrl') + '/drafts/all',\n      })\n      .then(() => {\n        app.store.data.drafts = [];\n        m.redraw();\n      });\n  }\n\n  view() {\n    const drafts = app.store.all('drafts');\n    const state = this.attrs.state;\n\n    return (\n      <div className=\"NotificationList DraftsList\">\n        <div className=\"NotificationList-header\">\n          <h4 className=\"App-titleControl App-titleControl--text\">{app.translator.trans('fof-drafts.forum.dropdown.title')}</h4>\n          <div class=\"App-primaryControl\">\n            <Tooltip showOnFocus={false} text={app.translator.trans('fof-drafts.forum.dropdown.delete_all_button')}>\n              <Button\n                data-container=\"body\"\n                icon=\"fas fa-trash-alt\"\n                className=\"Button Button--link Button--icon Alert-dismiss\"\n                onclick={this.deleteAll.bind(this)}\n              />\n            </Tooltip>\n          </div>\n        </div>\n        <div className=\"NotificationList-content\">\n          <ul className=\"NotificationGroup-content\">\n            {drafts.length\n              ? drafts\n                  .sort((a, b) => b.updatedAt() - a.updatedAt())\n                  .map((draft) => {\n                    return <DraftsListItem draft={draft} state={state} />;\n                  })\n              : null}\n\n            {state.loading ? (\n              <LoadingIndicator display=\"block\" />\n            ) : (\n              !drafts.length && <div className=\"NotificationList-empty\">{app.translator.trans('fof-drafts.forum.dropdown.empty_text')}</div>\n            )}\n          </ul>\n        </div>\n      </div>\n    );\n  }\n}\n","/*\n *\n *  This file is part of fof/drafts.\n *\n *  Copyright (c) 2019 FriendsOfFlarum.\n *\n *  For the full copyright and license information, please view the LICENSE.md\n *  file that was distributed with this source code.\n *\n */\n\nimport app from 'flarum/forum/app';\nimport Page from 'flarum/common/components/Page';\n\nimport DraftsList from './DraftsList';\n\nexport default class DraftsPage extends Page {\n  oninit(vnode) {\n    super.oninit(vnode);\n\n    app.history.push('drafts');\n\n    app.drafts.load();\n\n    this.bodyClass = 'App--drafts';\n  }\n\n  view() {\n    return (\n      <div className=\"DraftsPage\">\n        <DraftsList state={app.drafts}></DraftsList>\n      </div>\n    );\n  }\n}\n","const __WEBPACK_NAMESPACE_OBJECT__ = flarum.core.compat['common/components/HeaderSecondary'];","const __WEBPACK_NAMESPACE_OBJECT__ = flarum.core.compat['common/components/NotificationsDropdown'];","/*\n *\n *  This file is part of fof/drafts.\n *\n *  Copyright (c) 2019 FriendsOfFlarum.\n *\n *  For the full copyright and license information, please view the LICENSE.md\n *  file that was distributed with this source code.\n *\n */\n\nimport app from 'flarum/forum/app';\nimport NotificationsDropdown from 'flarum/common/components/NotificationsDropdown';\n\nimport DraftsList from './DraftsList';\n\nexport default class DraftsDropdown extends NotificationsDropdown {\n  static initAttrs(attrs) {\n    attrs.label = attrs.label || app.translator.trans('fof-drafts.forum.dropdown.tooltip');\n    attrs.icon = attrs.icon || 'fas fa-edit';\n\n    super.initAttrs(attrs);\n  }\n\n  getMenu() {\n    return (\n      <div className={'Dropdown-menu ' + this.attrs.menuClassName} onclick={this.menuClick.bind(this)}>\n        {this.showing ? DraftsList.component({ state: this.attrs.state }) : ''}\n      </div>\n    );\n  }\n\n  goToRoute() {\n    m.route.set(app.route('drafts'));\n  }\n\n  getUnreadCount() {\n    if (app.cache.draftsLoaded) {\n      return app.store.all('drafts').length;\n    }\n\n    return app.store.all('drafts').length + app.session.user.draftCount();\n  }\n\n  getNewCount() {\n    return this.getUnreadCount();\n  }\n}\n","const __WEBPACK_NAMESPACE_OBJECT__ = flarum.core.compat['common/components/FieldSet'];","const __WEBPACK_NAMESPACE_OBJECT__ = flarum.core.compat['common/components/SettingsPage'];","const __WEBPACK_NAMESPACE_OBJECT__ = flarum.core.compat['common/components/Switch'];","const __WEBPACK_NAMESPACE_OBJECT__ = flarum.core.compat['forum/components/Composer'];","const __WEBPACK_NAMESPACE_OBJECT__ = flarum.core.compat['forum/components/DiscussionComposer'];","const __WEBPACK_NAMESPACE_OBJECT__ = flarum.core.compat['forum/components/ReplyComposer'];","const __WEBPACK_NAMESPACE_OBJECT__ = flarum.core.compat['forum/states/ComposerState'];","const __WEBPACK_NAMESPACE_OBJECT__ = flarum.core.compat['common/components/Alert'];","const __WEBPACK_NAMESPACE_OBJECT__ = flarum.core.compat['common/components/Modal'];","import app from 'flarum/forum/app';\nimport Alert from 'flarum/common/components/Alert';\nimport Button from 'flarum/common/components/Button';\nimport Modal from 'flarum/common/components/Modal';\nimport LoadingIndicator from 'flarum/common/components/LoadingIndicator';\n\nconst CurrentDate = dayjs().format('YYYY-MM-DD');\nconst CurrentTime = dayjs().format('HH:mm');\n\nexport default class ScheduleDraftModal extends Modal {\n  loading = false;\n\n  date;\n  time;\n\n  previewFormatString;\n\n  oninit(vnode) {\n    super.oninit(vnode);\n\n    this.date = this.isScheduled() ? dayjs(this.attrs.draft.scheduledFor()).format('YYYY-MM-DD') : CurrentDate;\n    this.time = this.isScheduled() ? dayjs(this.attrs.draft.scheduledFor()).format('HH:mm') : CurrentTime;\n\n    this.previewFormatString = app.translator.trans('fof-drafts.forum.schedule_draft_modal.schedule_time_preview_formatter')[0];\n  }\n\n  className() {\n    return 'ScheduleDraftModal';\n  }\n\n  title() {\n    return app.translator.trans('fof-drafts.forum.schedule_draft_modal.title');\n  }\n\n  content() {\n    if (this.loading) {\n      return <LoadingIndicator />;\n    }\n\n    return [\n      this.attrs.draft.scheduledFor() ? (\n        <div className=\"Modal-alert\">\n          <Alert type=\"success\" dismissible={false}>\n            {app.translator.trans('fof-drafts.forum.schedule_draft_modal.scheduled_text', {\n              datetime: this.formattedDateTime(),\n            })}\n          </Alert>\n        </div>\n      ) : (\n        ''\n      ),\n      this.attrs.draft.scheduledValidationError() ? (\n        <div className=\"Modal-alert\">\n          <Alert type=\"error\" dismissible={false}>\n            {app.translator.trans('fof-drafts.forum.schedule_draft_modal.scheduled_error', {\n              error: this.attrs.draft.scheduledValidationError(),\n            })}\n          </Alert>\n        </div>\n      ) : (\n        ''\n      ),\n\n      <input style=\"display: none\"></input>,\n\n      <div className=\"Modal-body\">\n        <div className=\"Form Form--centered\">\n          <p className=\"helpText\">{app.translator.trans('fof-drafts.forum.schedule_draft_modal.text')}</p>\n          <div className=\"Form-group ScheduleDraftModal-timeDateGroup\">\n            <input\n              name=\"scheduledForDate\"\n              className=\"FormControl\"\n              type=\"date\"\n              min={CurrentDate}\n              value={this.date}\n              onchange={(e) => (this.date = e.target.value)}\n            />\n            <input name=\"scheduledForTime\" className=\"FormControl\" type=\"time\" value={this.time} onchange={(e) => (this.time = e.target.value)} />\n          </div>\n\n          {/* Date time preview */}\n          <div class=\"Form-group ScheduleDraftModal-datePreview\">\n            {app.translator.trans('fof-drafts.forum.schedule_draft_modal.schedule_time_preview', {\n              datetime: this.formattedDateTime(),\n            })}\n          </div>\n\n          <div className=\"Form-group ScheduleDraftModal-submitButtons\">\n            {/* Unschedule button */}\n            {this.isScheduled() && (\n              <Button\n                className=\"ScheduleDraftModal-unscheduleBtn Button Button--block Button--danger\"\n                loading={this.loading}\n                onclick={this.unschedule.bind(this)}\n              >\n                {app.translator.trans('fof-drafts.forum.schedule_draft_modal.unschedule_button')}\n              </Button>\n            )}\n\n            {/* Schedule/reschedule button */}\n            <Button\n              className=\"ScheduleDraftModal-scheduleBtn Button Button--block Button--primary\"\n              type=\"submit\"\n              loading={this.loading}\n              disabled={!this.changed()}\n            >\n              {this.isScheduled()\n                ? app.translator.trans('fof-drafts.forum.schedule_draft_modal.reschedule_button')\n                : app.translator.trans('fof-drafts.forum.schedule_draft_modal.schedule_button')}\n            </Button>\n          </div>\n        </div>\n      </div>,\n    ];\n  }\n\n  /**\n   * Returns a Date object for currently entered values in the modal.\n   */\n  scheduledFor() {\n    const date = new Date(`${this.date} ${this.time}`);\n\n    return date || null;\n  }\n\n  /**\n   * Whether the modal's details have been modified.\n   */\n  changed() {\n    const getTimeOrNull = (date) => (date ? date.getTime() || null : null);\n\n    return getTimeOrNull(this.scheduledFor()) !== getTimeOrNull(this.attrs.draft.scheduledFor());\n  }\n\n  isScheduled() {\n    return !!this.attrs.draft.scheduledFor();\n  }\n\n  formattedDateTime() {\n    const date = dayjs(this.scheduledFor());\n\n    // if (!date) {\n    //     return app.translator.trans('fof-drafts.forum.schedule_draft_modal.schedule_time_preview_invalid');\n    // }\n\n    const formatted = date.format(this.previewFormatString);\n\n    return formatted;\n  }\n\n  unschedule(e) {\n    e.preventDefault();\n\n    this.loading = true;\n\n    // Save draft with no scheduled post time\n    if (confirm(app.translator.trans('fof-drafts.forum.schedule_draft_modal.unschedule_warning'))) {\n      this.attrs.draft\n        .save({ scheduledFor: null, clearValidationError: true, scheduledValidationError: '' })\n        .then(() => {\n          this.success = true;\n          this.hide.call(this);\n        })\n        .catch(() => {})\n        .then(this.loaded.bind(this));\n    }\n  }\n\n  onsubmit(e) {\n    e.preventDefault();\n\n    this.loading = true;\n\n    this.attrs.draft\n      .save({ scheduledFor: this.scheduledFor(), clearValidationError: true, scheduledValidationError: '' })\n      .then(() => (this.success = true))\n      .catch(() => {})\n      .then(this.loaded.bind(this));\n  }\n}\n","import app from 'flarum/forum/app';\nimport DiscussionComposer from 'flarum/forum/components/DiscussionComposer';\nimport ReplyComposer from 'flarum/forum/components/ReplyComposer';\nimport ScheduleDraftModal from '../components/ScheduleDraftModal';\n\nexport default class DraftsListState {\n  constructor() {\n    /**\n     * Whether or not the flags are loading.\n     *\n     * @type {Boolean}\n     */\n    this.loading = false;\n\n    this.cache = [];\n  }\n\n  deleteDraft(draft) {\n    if (!window.confirm(app.translator.trans('fof-drafts.forum.dropdown.alert'))) return;\n\n    this.loading = true;\n\n    draft.delete().then(() => {\n      if (app.composer.body && app.composer.draft && app.composer.draft.id() === draft.id() && !app.composer.changed()) {\n        app.composer.hide();\n      }\n\n      this.loading = false;\n      m.redraw();\n    });\n  }\n\n  scheduleDraft(draft) {\n    if (!app.forum.attribute('canScheduleDrafts') || !app.forum.attribute('drafts.enableScheduledDrafts')) return;\n\n    app.modal.show(ScheduleDraftModal, { draft });\n  }\n\n  showComposer(draft) {\n    if (this.loading) return;\n\n    return new Promise((resolve) => {\n      let componentClass;\n\n      switch (draft.type()) {\n        case 'privateDiscussion':\n          componentClass = require('@fof-byobu').discussions['PrivateDiscussionComposer'];\n          break;\n        case 'reply':\n          componentClass = ReplyComposer;\n          break;\n        default:\n          componentClass = DiscussionComposer;\n      }\n\n      const data = draft.compileData();\n      app.composer.load(componentClass, data);\n\n      app.composer.show();\n\n      Object.assign(app.composer.fields, data.fields);\n\n      return resolve(app.composer);\n    });\n  }\n\n  load() {\n    if (app.cache.draftsLoaded) {\n      return;\n    }\n\n    this.loading = true;\n    m.redraw();\n\n    app.store\n      .find('drafts')\n      .then(\n        () => (app.cache.draftsLoaded = true),\n        () => {}\n      )\n      .then(() => {\n        this.loading = false;\n        m.redraw();\n      });\n  }\n}\n","/*\n *\n *  This file is part of fof/drafts.\n *\n *  Copyright (c) 2019 FriendsOfFlarum.\n *\n *  For the full copyright and license information, please view the LICENSE.md\n *  file that was distributed with this source code.\n *\n */\n\nimport DraftsDropdown from './DraftsDropdown';\nimport DraftsList from './DraftsList';\nimport DraftsListItem from './DraftsListItem';\nimport DraftsPage from './DraftsPage';\nimport ScheduleDraftModal from './ScheduleDraftModal';\n\nexport const components = {\n  DraftsDropdown: DraftsDropdown,\n  DraftsList: DraftsList,\n  DraftsListItem: DraftsListItem,\n  DraftsPage: DraftsPage,\n  ScheduleDraftModal: ScheduleDraftModal,\n};\n","/*\n *\n *  This file is part of fof/drafts.\n *\n *  Copyright (c) 2019 FriendsOfFlarum.\n *\n *  For the full copyright and license information, please view the LICENSE.md\n *  file that was distributed with this source code.\n *\n */\n\nimport Draft from './Draft';\n\nexport const models = {\n  Draft: Draft,\n};\n","/*\n *\n *  This file is part of fof/drafts.\n *\n *  Copyright (c) 2021 FriendsOfFlarum.\n *\n *  For the full copyright and license information, please view the LICENSE.md\n *  file that was distributed with this source code.\n *\n */\n\nimport DraftsListState from './DraftsListState';\n\nexport const states = {\n  DraftsListState: DraftsListState,\n};\n","/*\n *\n *  This file is part of fof/drafts.\n *\n *  Copyright (c) 2019 FriendsOfFlarum.\n *\n *  For the full copyright and license information, please view the LICENSE.md\n *  file that was distributed with this source code.\n *\n */\nimport fillRelationship from './fillRelationship';\n\nexport const utils = {\n  fillRelationship: fillRelationship,\n};\n","/*\n *\n *  This file is part of fof/drafts.\n *\n *  Copyright (c) 2019 FriendsOfFlarum.\n *\n *  For the full copyright and license information, please view the LICENSE.md\n *  file that was distributed with this source code.\n *\n */\n\nimport { extend, override } from 'flarum/common/extend';\nimport User from 'flarum/common/models/User';\nimport Model from 'flarum/common/Model';\nimport Stream from 'flarum/common/utils/Stream';\nimport Draft from './models/Draft';\nimport DraftsPage from './components/DraftsPage';\nimport addDraftsDropdown from './addDraftsDropdown';\nimport addPreferences from './addPreferences';\nimport Composer from 'flarum/forum/components/Composer';\nimport DiscussionComposer from 'flarum/forum/components/DiscussionComposer';\nimport ReplyComposer from 'flarum/forum/components/ReplyComposer';\nimport Button from 'flarum/common/components/Button';\nimport ComposerState from 'flarum/forum/states/ComposerState';\nimport fillRelationship from './utils/fillRelationship';\nimport DraftsListState from './states/DraftsListState';\nimport app from 'flarum/forum/app';\n\nexport * from './components';\nexport * from './models';\nexport * from './states';\nexport * from './utils';\n\napp.initializers.add('fof-drafts', () => {\n  app.store.models.drafts = Draft;\n  User.prototype.drafts = Model.hasMany('drafts');\n  User.prototype.draftCount = Model.attribute('draftCount');\n\n  app.routes.drafts = { path: '/drafts', component: DraftsPage };\n\n  app.drafts = new DraftsListState(app);\n\n  ComposerState.prototype['changed'] = function () {\n    if (!this.body || !this.data) return false;\n\n    const data = this.data();\n    const draft = this.draft;\n\n    const fields = Object.keys(data).filter((element) => element !== 'relationships');\n\n    if (!fields) {\n      return false;\n    }\n\n    // If there's no content, we don't want to save this draft\n    // regardless of whether other attributes have changed.\n    if (!this.fields.content()) {\n      return false;\n    }\n\n    const getData = (field) => (field === 'content' ? this.fields.content() : data[field]) || '';\n\n    for (const field of fields) {\n      if ((!draft && getData(field)) || (draft && getData(field) != draft.data.attributes[field])) {\n        return true;\n      }\n    }\n\n    if (!data.relationships && !draft.relationships()) {\n      return false;\n    }\n\n    const relationships = Object.keys(data.relationships);\n\n    const equalRelationships = (data, draft, relationship) => {\n      if (\n        (!data.relationships[relationship] || !data.relationships[relationship].length) &&\n        (!(relationship in draft.relationships()) || !draft.relationships()[relationship].data?.length)\n      ) {\n        return true;\n      } else if (\n        !(relationship in draft.relationships()) ||\n        data.relationships[relationship].length !== draft.relationships()[relationship].data?.length\n      ) {\n        return false;\n      }\n\n      const getId = (element) => (typeof element.id == 'function' ? element.id() : element.id);\n\n      const dataIds = fillRelationship(data.relationships[relationship], getId);\n      const draftIds = fillRelationship(draft.relationships()[relationship].data, getId);\n\n      return !dataIds.some((id, i) => id !== draftIds[i]);\n    };\n\n    for (const relationship of relationships) {\n      if (!draft) {\n        if (data.relationships[relationship]) {\n          return true;\n        }\n      } else {\n        if (!equalRelationships(data, draft, relationship)) {\n          return true;\n        }\n      }\n    }\n\n    return false;\n  };\n\n  ComposerState.prototype['saveDraft'] = function () {\n    this.saving = true;\n    m.redraw();\n\n    const afterSave = () => {\n      this.saving = false;\n      this.justSaved = true;\n      setTimeout(() => {\n        this.justSaved = false;\n        m.redraw();\n      }, 300);\n      m.redraw();\n    };\n\n    const draft = this.draft;\n\n    if (draft && draft.id() && !draft.exists) {\n      // Draft was deleted before autosave, no need to save.\n      return;\n    }\n\n    if (draft) {\n      delete draft.data.attributes.relationships;\n\n      draft.save(Object.assign(draft.data.attributes, this.data())).then(() => afterSave());\n    } else {\n      app.store\n        .createRecord('drafts')\n        .save(this.data())\n        .then((draft) => {\n          draft.loadRelationships(true);\n          this.draft = draft;\n          afterSave();\n        });\n    }\n  };\n\n  extend(Composer.prototype, 'controlItems', function (items) {\n    if (\n      !(this.state.bodyMatches(DiscussionComposer) || this.state.bodyMatches(ReplyComposer)) ||\n      !app.forum.attribute('canSaveDrafts') ||\n      this.state.position === 'minimized'\n    )\n      return;\n\n    const classNames = ['Button', 'Button--icon', 'Button--link'];\n\n    if (this.state.saving) {\n      classNames.push('saving');\n    }\n\n    if (this.state.justSaved) {\n      classNames.push('justSaved');\n    }\n\n    items.add(\n      'save-draft',\n      Button.component({\n        icon: this.state.justSaved ? 'fas fa-check' : this.state.saving ? 'fas fa-spinner fa-spin' : 'fas fa-save',\n        className: classNames.join(' '),\n        itemClassName: 'App-backControl',\n        title: app.translator.trans('fof-drafts.forum.composer.title'),\n        disabled: this.state.saving || this.state.justSaved || this.loading,\n        onclick: this.state.saveDraft.bind(this.state),\n      }),\n      20\n    );\n  });\n\n  extend(ComposerState.prototype, 'load', function () {\n    if (!app.forum.attribute('canSaveDrafts')) return;\n\n    if (app.session.user.preferences().draftAutosaveEnable && (this.bodyMatches(DiscussionComposer) || this.bodyMatches(ReplyComposer))) {\n      this.autosaveInterval = setInterval(() => {\n        if (this.changed() && !this.saving && !this.loading) {\n          this.saveDraft();\n        }\n      }, 1000 * app.session.user.preferences().draftAutosaveInterval);\n    }\n  });\n\n  extend(ComposerState.prototype, 'clear', function () {\n    this.draft = null;\n    if (this.autosaveInterval) clearInterval(this.autosaveInterval);\n  });\n\n  override(ComposerState.prototype, 'preventExit', function (original) {\n    if (this.body && this.body.componentClass && this.draft) {\n      this.body.attrs.confirmExit = app.translator.trans('fof-drafts.forum.composer.exit_alert');\n    }\n\n    let prevented = false;\n    if (this.changed()) {\n      prevented = original();\n    }\n\n    if (prevented) return prevented;\n\n    if (!this.body || !this.body.componentClass) return;\n\n    const draft = this.draft;\n    if (draft && !draft.title() && !draft.content() && confirm(app.translator.trans('fof-drafts.forum.composer.discard_empty_draft_alert'))) {\n      draft.delete();\n    }\n\n    return prevented;\n  });\n\n  function initComposerBody() {\n    Object.keys(this.attrs).forEach((key) => {\n      if (!['originalContent', 'title', 'user'].includes(key)) {\n        this[key] = this.attrs[key];\n      } else if (key === 'title') {\n        this.title = Stream(this.attrs.title);\n      }\n    });\n\n    if (this.data) {\n      this.composer.data = this.data.bind(this);\n    }\n\n    if (this.attrs.draft) {\n      this.composer.draft = this.attrs.draft;\n    }\n  }\n\n  extend(DiscussionComposer.prototype, 'oninit', initComposerBody);\n  extend(ReplyComposer.prototype, 'oninit', initComposerBody);\n\n  function deleteDraftsOnSubmit() {\n    if (this.composer.draft) {\n      this.composer.draft.delete();\n    }\n  }\n\n  extend(DiscussionComposer.prototype, 'onsubmit', deleteDraftsOnSubmit);\n  extend(ReplyComposer.prototype, 'onsubmit', deleteDraftsOnSubmit);\n\n  if (app.initializers.has('fof-byobu')) {\n    const PrivateDiscussionComposer = flarum.extensions['fof-byobu'].discussions.PrivateDiscussionComposer;\n    extend(PrivateDiscussionComposer.prototype, 'onsubmit', deleteDraftsOnSubmit);\n  }\n\n  addDraftsDropdown();\n  addPreferences();\n});\n","/*\n *\n *  This file is part of fof/drafts.\n *\n *  Copyright (c) 2019 FriendsOfFlarum.\n *\n *  For the full copyright and license information, please view the LICENSE.md\n *  file that was distributed with this source code.\n *\n */\n\nimport { extend } from 'flarum/common/extend';\nimport app from 'flarum/forum/app';\nimport HeaderSecondary from 'flarum/common/components/HeaderSecondary';\nimport DraftsDropdown from './components/DraftsDropdown';\n\nexport default function () {\n  extend(HeaderSecondary.prototype, 'items', function (items) {\n    if (!app.session.user || !app.forum.attribute('canSaveDrafts')) return;\n\n    items.add('Drafts', <DraftsDropdown state={app.drafts} />, 20);\n  });\n}\n","import app from 'flarum/forum/app';\nimport { extend, override } from 'flarum/common/extend';\nimport Button from 'flarum/common/components/Button';\nimport FieldSet from 'flarum/common/components/FieldSet';\nimport SettingsPage from 'flarum/common/components/SettingsPage';\nimport Switch from 'flarum/common/components/Switch';\nimport ItemList from 'flarum/common/utils/ItemList';\nimport Stream from 'flarum/common/utils/Stream';\n\nexport default function () {\n  extend(SettingsPage.prototype, 'oninit', function () {\n    this.draftAutosaveInterval = Stream(this.user.preferences().draftAutosaveInterval);\n  });\n\n  extend(SettingsPage.prototype, 'settingsItems', function (items) {\n    if (app.forum.data.attributes.canSaveDrafts) {\n      items.add(\n        'drafts',\n        FieldSet.component(\n          {\n            label: app.translator.trans('fof-drafts.forum.user.settings.drafts_heading'),\n            className: 'Settings-drafts',\n          },\n          this.draftsItems().toArray()\n        )\n      );\n    }\n  });\n\n  SettingsPage.prototype['draftsItems'] = function () {\n    const items = new ItemList();\n\n    items.add(\n      'draft-autosave-enable',\n      Switch.component(\n        {\n          state: this.user.preferences().draftAutosaveEnable,\n          onchange: (value) => {\n            this.draftAutosaveEnableLoading = true;\n\n            this.user.savePreferences({ draftAutosaveEnable: value }).then(() => {\n              this.draftAutosaveEnableLoading = false;\n              m.redraw();\n            });\n          },\n          loading: this.draftAutosaveEnableLoading,\n        },\n        app.translator.trans('fof-drafts.forum.user.settings.draft_autosave_enable')\n      )\n    );\n\n    items.add(\n      'draft-autosave-interval',\n      this.user.preferences().draftAutosaveEnable ? (\n        <label>\n          <p>{app.translator.trans('fof-drafts.forum.user.settings.draft_autosave_interval_label')}</p>\n          <input className=\"FormControl\" type=\"number\" min=\"0\" bidi={this.draftAutosaveInterval} />\n          {Button.component(\n            {\n              className: 'Button Button--primary',\n              onclick: () => {\n                const isInt = (str) => str == Math.round(str);\n                if (this.draftAutosaveInterval() < 0 || !isInt(this.draftAutosaveInterval())) {\n                  this.draftAutosaveIntervalInvalid = true;\n                  this.draftAutosaveInterval(this.user.preferences().draftAutosaveInterval);\n                  m.redraw();\n                } else {\n                  this.draftAutosaveIntervalInvalid = false;\n                  this.user.savePreferences({ draftAutosaveInterval: this.draftAutosaveInterval() }).then(() => {\n                    m.redraw();\n                  });\n                }\n              },\n            },\n            app.translator.trans('fof-drafts.forum.user.settings.draft_autosave_interval_button')\n          )}\n          {this.draftAutosaveIntervalInvalid ? (\n            <p class=\"invalidInterval\">\n              <small>{app.translator.trans('fof-drafts.forum.user.settings.draft_autosave_interval_invalid')}</small>\n            </p>\n          ) : (\n            ''\n          )}\n        </label>\n      ) : (\n        <p></p>\n      )\n    );\n\n    return items;\n  };\n}\n"],"names":["module","exports","e","n","r","i","s","u","a","o","f","h","c","d","$","l","y","M","name","weekdays","split","months","m","t","String","length","Array","join","g","z","utcOffset","Math","abs","floor","date","year","month","clone","add","ceil","p","w","D","ms","Q","toLowerCase","replace","v","_","S","args","arguments","O","locale","$L","utc","$u","x","$x","$offset","this","parse","prototype","$d","Date","NaN","test","match","substring","UTC","init","$y","getFullYear","$M","getMonth","$D","getDate","$W","getDay","$H","getHours","$m","getMinutes","$s","getSeconds","$ms","getMilliseconds","$utils","isValid","toString","isSame","startOf","endOf","isAfter","isBefore","$g","set","unix","valueOf","getTime","toDate","apply","slice","$locale","weekStart","$set","min","daysInMonth","get","Number","round","subtract","format","substr","meridiem","YY","YYYY","MM","MMM","monthsShort","MMMM","DD","dd","weekdaysMin","ddd","weekdaysShort","dddd","H","HH","hh","A","mm","ss","SSS","Z","getTimezoneOffset","diff","toJSON","toISOString","toUTCString","b","forEach","extend","$i","isDayjs","en","Ls","flarum","extensions","__webpack_module_cache__","__webpack_require__","moduleId","cachedModule","undefined","__webpack_modules__","call","getter","__esModule","definition","key","Object","defineProperty","enumerable","obj","prop","hasOwnProperty","Symbol","toStringTag","value","core","compat","_setPrototypeOf","setPrototypeOf","__proto__","_inheritsLoose","subClass","superClass","create","constructor","data","map","isArray","sort","Draft","mixin","Model","user","content","title","scheduledValidationError","relationships","extra","scheduledFor","updatedAt","loadedRelationships","type","loadRelationships","discussion","discussions","icon","app","force","keys","relationshipName","relationship","fillRelationship","model","id","recipients","ItemList","group","compileData","originalContent","confirmExit","draft","fields","assign","DraftsListItem","canSchedule","oncreate","vnode","view","attrs","state","scheduledDraftIcon","onclick","showComposer","bind","className","avatar","class","showOnFocus","text","datetime","dayjs","humanTime","deleteDraft","stopPropagation","scheduleDraft","truncate","Component","DraftsList","on","event","deleteAll","confirm","method","url","then","redraw","drafts","loading","display","DraftsPage","oninit","bodyClass","Page","DraftsDropdown","initAttrs","label","getMenu","menuClassName","menuClick","showing","component","goToRoute","route","getUnreadCount","getNewCount","NotificationsDropdown","CurrentDate","CurrentTime","ScheduleDraftModal","time","previewFormatString","isScheduled","dismissible","formattedDateTime","error","style","onchange","target","unschedule","disabled","changed","getTimeOrNull","preventDefault","save","clearValidationError","success","hide","loaded","onsubmit","Modal","DraftsListState","cache","window","Promise","resolve","componentClass","require","ReplyComposer","DiscussionComposer","load","components","models","states","utils","initComposerBody","includes","Stream","composer","deleteDraftsOnSubmit","User","path","ComposerState","body","filter","element","getData","field","attributes","equalRelationships","getId","dataIds","draftIds","some","saving","afterSave","justSaved","setTimeout","exists","Composer","items","bodyMatches","position","classNames","push","Button","itemClassName","saveDraft","draftAutosaveEnable","autosaveInterval","setInterval","draftAutosaveInterval","clearInterval","override","original","prevented","PrivateDiscussionComposer","HeaderSecondary","SettingsPage","preferences","FieldSet","draftsItems","toArray","Switch","draftAutosaveEnableLoading","savePreferences","bidi","str","draftAutosaveIntervalInvalid"],"sourceRoot":""}